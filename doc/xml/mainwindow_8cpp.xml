<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.7.3">
  <compounddef id="mainwindow_8cpp" kind="file">
    <compoundname>mainwindow.cpp</compoundname>
    <includes refid="mainwindow_8h" local="yes">mainwindow.h</includes>
    <includes refid="ui__mainwindow_8h" local="yes">ui_mainwindow.h</includes>
    <includes refid="preferences_8h" local="yes">preferences.h</includes>
    <includes refid="about_8h" local="yes">about.h</includes>
    <includes refid="properties_8h" local="yes">properties.h</includes>
    <includes refid="extras_8h" local="yes">extras.h</includes>
    <includes refid="QOpenCVWidget_8h" local="yes">QOpenCVWidget.h</includes>
    <includes local="yes">glob.h</includes>
    <includes local="no">sys/stat.h</includes>
    <includes local="no">opencv/cv.h</includes>
    <includes local="no">opencv/highgui.h</includes>
    <includes local="no">libnotify/notify.h</includes>
    <includes local="no">fstream</includes>
    <includes local="no">iostream</includes>
    <includes local="no">QMessageBox</includes>
    <includes local="no">QClipboard</includes>
    <includes local="no">QtDBus/QtDBus</includes>
    <includes local="no">QtDBus/QDBusMessage</includes>
    <includes local="no">QUrl</includes>
    <includes local="no">QTransform</includes>
    <includes local="no">QDrag</includes>
    <includes local="no">QProgressDialog</includes>
    <includes local="no">QFileDialog</includes>
    <includes local="no">QTextStream</includes>
    <includes local="no">QAction</includes>
    <includes local="no">QSettings</includes>
    <includes local="no">QRect</includes>
    <includes local="no">QDesktopWidget</includes>
    <includes local="no">QSystemTrayIcon</includes>
    <includes local="no">QCloseEvent</includes>
    <includes local="no">QMenu</includes>
    <includes local="no">QShortcut</includes>
    <includes local="no">QListWidgetItem</includes>
    <includes local="no">QListWidget</includes>
    <includes local="no">QWidget</includes>
    <includes local="no">QtConcurrentRun</includes>
    <includes local="no">QtNetwork/QNetworkAccessManager</includes>
    <includes local="no">QtNetwork/QNetworkReply</includes>
    <includes local="no">QtNetwork/QNetworkRequest</includes>
    <includes local="no">QDesktopServices</includes>
    <includes local="no">SFML/Audio.hpp</includes>
    <includes local="no">gconf/gconf-client.h</includes>
    <incdepgraph>
      <node id="671">
        <label>sys/stat.h</label>
      </node>
      <node id="670">
        <label>glob.h</label>
      </node>
      <node id="693">
        <label>QtConcurrentRun</label>
      </node>
      <node id="680">
        <label>QTransform</label>
      </node>
      <node id="688">
        <label>QCloseEvent</label>
      </node>
      <node id="650">
        <label>QSettings</label>
      </node>
      <node id="637">
        <label>QtGui/QMainWindow</label>
      </node>
      <node id="676">
        <label>QMessageBox</label>
      </node>
      <node id="664">
        <label>opencv/cv.h</label>
      </node>
      <node id="649">
        <label>QObject</label>
      </node>
      <node id="689">
        <label>QMenu</label>
      </node>
      <node id="672">
        <label>opencv/highgui.h</label>
      </node>
      <node id="657">
        <label>QMenuBar</label>
      </node>
      <node id="686">
        <label>QRect</label>
      </node>
      <node id="655">
        <label>QMainWindow</label>
      </node>
      <node id="652">
        <label>SFML/Audio.hpp</label>
      </node>
      <node id="656">
        <label>QSystemTrayIcon</label>
      </node>
      <node id="661">
        <label>QUrl</label>
      </node>
      <node id="682">
        <label>QProgressDialog</label>
      </node>
      <node id="631">
        <label>QtGui/QApplication</label>
      </node>
      <node id="641">
        <label>QtGui/QPushButton</label>
      </node>
      <node id="695">
        <label>QtNetwork/QNetworkReply</label>
      </node>
      <node id="669">
        <label>QImage</label>
      </node>
      <node id="677">
        <label>QClipboard</label>
      </node>
      <node id="678">
        <label>QtDBus/QtDBus</label>
      </node>
      <node id="674">
        <label>fstream</label>
      </node>
      <node id="692">
        <label>QListWidget</label>
      </node>
      <node id="663">
        <label>QOpenCVWidget.h</label>
        <link refid="QOpenCVWidget_8h"/>
        <childnode refid="664" relation="include">
        </childnode>
        <childnode refid="665" relation="include">
        </childnode>
        <childnode refid="666" relation="include">
        </childnode>
        <childnode refid="667" relation="include">
        </childnode>
        <childnode refid="668" relation="include">
        </childnode>
        <childnode refid="669" relation="include">
        </childnode>
      </node>
      <node id="697">
        <label>QDesktopServices</label>
      </node>
      <node id="690">
        <label>QShortcut</label>
      </node>
      <node id="696">
        <label>QtNetwork/QNetworkRequest</label>
      </node>
      <node id="658">
        <label>QDragEnterEvent</label>
      </node>
      <node id="629">
        <label>QtCore/QVariant</label>
      </node>
      <node id="636">
        <label>QtGui/QListWidget</label>
      </node>
      <node id="683">
        <label>QFileDialog</label>
      </node>
      <node id="660">
        <label>QtNetwork</label>
      </node>
      <node id="644">
        <label>QtGui/QWidget</label>
      </node>
      <node id="687">
        <label>QDesktopWidget</label>
      </node>
      <node id="685">
        <label>QAction</label>
      </node>
      <node id="639">
        <label>QtGui/QMenuBar</label>
      </node>
      <node id="627">
        <label>QDialog</label>
      </node>
      <node id="668">
        <label>QVBoxLayout</label>
      </node>
      <node id="654">
        <label>QTimer</label>
      </node>
      <node id="646">
        <label>QGroupBox</label>
      </node>
      <node id="667">
        <label>QWidget</label>
      </node>
      <node id="635">
        <label>QtGui/QLabel</label>
      </node>
      <node id="681">
        <label>QDrag</label>
      </node>
      <node id="645">
        <label>properties.h</label>
        <link refid="properties_8h"/>
        <childnode refid="627" relation="include">
        </childnode>
        <childnode refid="646" relation="include">
        </childnode>
        <childnode refid="647" relation="include">
        </childnode>
      </node>
      <node id="662">
        <label>QFile</label>
      </node>
      <node id="630">
        <label>QtGui/QAction</label>
      </node>
      <node id="651">
        <label>gconf/gconf-client.h</label>
      </node>
      <node id="666">
        <label>QLabel</label>
      </node>
      <node id="625">
        <label>mainwindow.h</label>
        <link refid="mainwindow_8h"/>
        <childnode refid="626" relation="include">
        </childnode>
        <childnode refid="628" relation="include">
        </childnode>
        <childnode refid="645" relation="include">
        </childnode>
        <childnode refid="648" relation="include">
        </childnode>
        <childnode refid="653" relation="include">
        </childnode>
        <childnode refid="654" relation="include">
        </childnode>
        <childnode refid="655" relation="include">
        </childnode>
        <childnode refid="656" relation="include">
        </childnode>
        <childnode refid="657" relation="include">
        </childnode>
        <childnode refid="658" relation="include">
        </childnode>
        <childnode refid="659" relation="include">
        </childnode>
        <childnode refid="660" relation="include">
        </childnode>
        <childnode refid="661" relation="include">
        </childnode>
        <childnode refid="662" relation="include">
        </childnode>
        <childnode refid="649" relation="include">
        </childnode>
      </node>
      <node id="679">
        <label>QtDBus/QDBusMessage</label>
      </node>
      <node id="694">
        <label>QtNetwork/QNetworkAccessManager</label>
      </node>
      <node id="628">
        <label>ui_mainwindow.h</label>
        <link refid="ui__mainwindow_8h"/>
        <childnode refid="629" relation="include">
        </childnode>
        <childnode refid="630" relation="include">
        </childnode>
        <childnode refid="631" relation="include">
        </childnode>
        <childnode refid="632" relation="include">
        </childnode>
        <childnode refid="633" relation="include">
        </childnode>
        <childnode refid="634" relation="include">
        </childnode>
        <childnode refid="635" relation="include">
        </childnode>
        <childnode refid="636" relation="include">
        </childnode>
        <childnode refid="637" relation="include">
        </childnode>
        <childnode refid="638" relation="include">
        </childnode>
        <childnode refid="639" relation="include">
        </childnode>
        <childnode refid="640" relation="include">
        </childnode>
        <childnode refid="641" relation="include">
        </childnode>
        <childnode refid="642" relation="include">
        </childnode>
        <childnode refid="643" relation="include">
        </childnode>
        <childnode refid="644" relation="include">
        </childnode>
      </node>
      <node id="675">
        <label>iostream</label>
      </node>
      <node id="638">
        <label>QtGui/QMenu</label>
      </node>
      <node id="647">
        <label>QGridLayout</label>
      </node>
      <node id="642">
        <label>QtGui/QSlider</label>
      </node>
      <node id="632">
        <label>QtGui/QButtonGroup</label>
      </node>
      <node id="665">
        <label>QPixmap</label>
      </node>
      <node id="659">
        <label>QDropEvent</label>
      </node>
      <node id="653">
        <label>extras.h</label>
        <link refid="extras_8h"/>
        <childnode refid="627" relation="include">
        </childnode>
        <childnode refid="654" relation="include">
        </childnode>
      </node>
      <node id="648">
        <label>preferences.h</label>
        <link refid="preferences_8h"/>
        <childnode refid="627" relation="include">
        </childnode>
        <childnode refid="649" relation="include">
        </childnode>
        <childnode refid="650" relation="include">
        </childnode>
        <childnode refid="651" relation="include">
        </childnode>
        <childnode refid="652" relation="include">
        </childnode>
      </node>
      <node id="684">
        <label>QTextStream</label>
      </node>
      <node id="624">
        <label>/home/maxmahem/wallch-2.0/mainwindow.cpp</label>
        <link refid="mainwindow.cpp"/>
        <childnode refid="625" relation="include">
        </childnode>
        <childnode refid="628" relation="include">
        </childnode>
        <childnode refid="648" relation="include">
        </childnode>
        <childnode refid="626" relation="include">
        </childnode>
        <childnode refid="645" relation="include">
        </childnode>
        <childnode refid="653" relation="include">
        </childnode>
        <childnode refid="663" relation="include">
        </childnode>
        <childnode refid="670" relation="include">
        </childnode>
        <childnode refid="671" relation="include">
        </childnode>
        <childnode refid="664" relation="include">
        </childnode>
        <childnode refid="672" relation="include">
        </childnode>
        <childnode refid="673" relation="include">
        </childnode>
        <childnode refid="674" relation="include">
        </childnode>
        <childnode refid="675" relation="include">
        </childnode>
        <childnode refid="676" relation="include">
        </childnode>
        <childnode refid="677" relation="include">
        </childnode>
        <childnode refid="678" relation="include">
        </childnode>
        <childnode refid="679" relation="include">
        </childnode>
        <childnode refid="661" relation="include">
        </childnode>
        <childnode refid="680" relation="include">
        </childnode>
        <childnode refid="681" relation="include">
        </childnode>
        <childnode refid="682" relation="include">
        </childnode>
        <childnode refid="683" relation="include">
        </childnode>
        <childnode refid="684" relation="include">
        </childnode>
        <childnode refid="685" relation="include">
        </childnode>
        <childnode refid="650" relation="include">
        </childnode>
        <childnode refid="686" relation="include">
        </childnode>
        <childnode refid="687" relation="include">
        </childnode>
        <childnode refid="656" relation="include">
        </childnode>
        <childnode refid="688" relation="include">
        </childnode>
        <childnode refid="689" relation="include">
        </childnode>
        <childnode refid="690" relation="include">
        </childnode>
        <childnode refid="691" relation="include">
        </childnode>
        <childnode refid="692" relation="include">
        </childnode>
        <childnode refid="667" relation="include">
        </childnode>
        <childnode refid="693" relation="include">
        </childnode>
        <childnode refid="694" relation="include">
        </childnode>
        <childnode refid="695" relation="include">
        </childnode>
        <childnode refid="696" relation="include">
        </childnode>
        <childnode refid="697" relation="include">
        </childnode>
        <childnode refid="652" relation="include">
        </childnode>
        <childnode refid="651" relation="include">
        </childnode>
      </node>
      <node id="626">
        <label>about.h</label>
        <link refid="about_8h"/>
        <childnode refid="627" relation="include">
        </childnode>
      </node>
      <node id="643">
        <label>QtGui/QStatusBar</label>
      </node>
      <node id="691">
        <label>QListWidgetItem</label>
      </node>
      <node id="673">
        <label>libnotify/notify.h</label>
      </node>
      <node id="634">
        <label>QtGui/QHeaderView</label>
      </node>
      <node id="633">
        <label>QtGui/QGridLayout</label>
      </node>
      <node id="640">
        <label>QtGui/QProgressBar</label>
      </node>
    </incdepgraph>
      <sectiondef kind="define">
      <memberdef kind="define" id="mainwindow_8cpp_1ab5522b54e1fe7195735f5a405f026039" prot="public" static="no">
        <name>QT_NO_KEYWORDS</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="20" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="20" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="var">
      <memberdef kind="variable" id="mainwindow_8cpp_1afe228fb35e2737cb1becbbe9b4308614" prot="public" static="no" mutable="no">
        <type>int</type>
        <definition>int _live_earth_running_</definition>
        <argsstring></argsstring>
        <name>_live_earth_running_</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="71" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="71" bodyend="-1"/>
        <referencedby refid="classExtras_1ac0a6027f472204fc979ae9a6f1351c3c" compoundref="extras_8cpp" startline="33" endline="64">Extras::Extras</referencedby>
      </memberdef>
      <memberdef kind="variable" id="mainwindow_8cpp_1a532748c39d92699468edec43c58d8b06" prot="public" static="no" mutable="no">
        <type>int</type>
        <definition>int _on_boot_once_running_</definition>
        <argsstring></argsstring>
        <name>_on_boot_once_running_</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="72" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="72" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="mainwindow_8cpp_1aa87fa99b597a16b7c625e511ebbb5581" prot="public" static="no" mutable="no">
        <type>int</type>
        <definition>int _on_boot_constant_running_</definition>
        <argsstring></argsstring>
        <name>_on_boot_constant_running_</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="73" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="73" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="mainwindow_8cpp_1a652f3ec6c0e23f72e16fa43bf0b407f1" prot="public" static="no" mutable="no">
        <type>int</type>
        <definition>int seconds_left</definition>
        <argsstring></argsstring>
        <name>seconds_left</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="74" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="74" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="mainwindow_8cpp_1acd8df10a3a7630b3ff5ea0c2b597922e" prot="public" static="no" mutable="no">
        <type>int</type>
        <definition>int random_first</definition>
        <argsstring></argsstring>
        <name>random_first</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="75" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="75" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="mainwindow_8cpp_1a7106e2abc437ad981830d14176d15f09" prot="public" static="no" mutable="no">
        <type>int</type>
        <definition>int number</definition>
        <argsstring></argsstring>
        <name>number</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="76" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="76" bodyend="-1"/>
        <referencedby refid="classproperties_1aa7592a90ccdf6a691b0fa2ca54f77641" compoundref="properties_8cpp" startline="36" endline="74">properties::properties</referencedby>
      </memberdef>
      <memberdef kind="variable" id="mainwindow_8cpp_1affd617bf010aaf31a24e8b51f6afeea4" prot="public" static="no" mutable="no">
        <type>int</type>
        <definition>int tmp_number</definition>
        <argsstring></argsstring>
        <name>tmp_number</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="76" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="76" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="mainwindow_8cpp_1a8715771c19d8223abb2abe25f5f06be0" prot="public" static="no" mutable="no">
        <type>int</type>
        <definition>int seconds_minutes_hours</definition>
        <argsstring></argsstring>
        <name>seconds_minutes_hours</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="77" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="77" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="mainwindow_8cpp_1ad169bac577628d452c8ddddffcd2c22c" prot="public" static="no" mutable="no">
        <type>int</type>
        <definition>int tmp_seconds_minutes_hours</definition>
        <argsstring></argsstring>
        <name>tmp_seconds_minutes_hours</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="78" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="78" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="mainwindow_8cpp_1a96203077ee28957ab99fcabaf70abc0f" prot="public" static="no" mutable="no">
        <type>int</type>
        <definition>int pref</definition>
        <argsstring></argsstring>
        <name>pref</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="80" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="80" bodyend="-1"/>
        <referencedby refid="classMainWindow_1af4ca5d0d3d18ddcb7d54b6596bbf4797" compoundref="mainwindow_8cpp" startline="289" endline="322">MainWindow::changeEvent</referencedby>
        <referencedby refid="classMainWindow_1a571e513ee5005742161fd4de81c86ca2" compoundref="mainwindow_8cpp" startline="324" endline="350">MainWindow::clickSysTrayIcon</referencedby>
        <referencedby refid="classMainWindow_1a7aec36163c9dfeda7da43b3e0854d673" compoundref="mainwindow_8cpp" startline="915" endline="923">MainWindow::ShowPreferences</referencedby>
      </memberdef>
      <memberdef kind="variable" id="mainwindow_8cpp_1aeb84694c28fdf361868a5234d9d74db7" prot="public" static="no" mutable="no">
        <type>int</type>
        <definition>int add</definition>
        <argsstring></argsstring>
        <name>add</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="81" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="81" bodyend="-1"/>
        <referencedby refid="classMainWindow_1af4ca5d0d3d18ddcb7d54b6596bbf4797" compoundref="mainwindow_8cpp" startline="289" endline="322">MainWindow::changeEvent</referencedby>
      </memberdef>
      <memberdef kind="variable" id="mainwindow_8cpp_1a57575a2e64cb4b9f815d1cb540689402" prot="public" static="no" mutable="no">
        <type>int</type>
        <definition>int show_notification</definition>
        <argsstring></argsstring>
        <name>show_notification</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="82" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="82" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="mainwindow_8cpp_1a2f73f86b6ed098ec989ba1767b5e8c2b" prot="public" static="no" mutable="no">
        <type>int</type>
        <definition>int minimize_to_tray</definition>
        <argsstring></argsstring>
        <name>minimize_to_tray</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="83" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="83" bodyend="-1"/>
        <referencedby refid="classMainWindow_1af4ca5d0d3d18ddcb7d54b6596bbf4797" compoundref="mainwindow_8cpp" startline="289" endline="322">MainWindow::changeEvent</referencedby>
        <referencedby refid="classMainWindow_1a2f76e8dbbe9eca94d07919786a7c5108" compoundref="mainwindow_8cpp" startline="583" endline="587">MainWindow::close_minimize</referencedby>
        <referencedby refid="classMainWindow_1a8b244be8b7b7db1b08de2a2acb9409db" compoundref="mainwindow_8cpp" startline="97" endline="267">MainWindow::MainWindow</referencedby>
      </memberdef>
      <memberdef kind="variable" id="mainwindow_8cpp_1af9a76d8fef8b0c2cb8c58535f33801c1" prot="public" static="no" mutable="no">
        <type>int</type>
        <definition>int properties_times</definition>
        <argsstring></argsstring>
        <name>properties_times</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="84" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="84" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="mainwindow_8cpp_1af16ca7cafa7596c54976c19ee1223e4c" prot="public" static="no" mutable="no">
        <type>int</type>
        <definition>int close_minimize_app</definition>
        <argsstring></argsstring>
        <name>close_minimize_app</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="85" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="85" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="mainwindow_8cpp_1abe45c1cc4b6d92ec1d811272ee2de8a0" prot="public" static="no" mutable="no">
        <type>int</type>
        <definition>int propertieswindow</definition>
        <argsstring></argsstring>
        <name>propertieswindow</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="86" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="86" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="mainwindow_8cpp_1a98dda529b7c9c1d6bb6edf3644a1954f" prot="public" static="no" mutable="no">
        <type>bool</type>
        <definition>bool extras_shown</definition>
        <argsstring></argsstring>
        <name>extras_shown</name>
        <initializer>false</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="88" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="88" bodyend="-1"/>
        <referencedby refid="classMainWindow_1ae3130ae3dcc5f6261fb633f52ec062a7" compoundref="mainwindow_8cpp" startline="925" endline="935">MainWindow::ShowExtras</referencedby>
      </memberdef>
      <memberdef kind="variable" id="mainwindow_8cpp_1a766fcc640f3cd66e7b53c55ec392c842" prot="public" static="no" mutable="no">
        <type>bool</type>
        <definition>bool start_just_clicked</definition>
        <argsstring></argsstring>
        <name>start_just_clicked</name>
        <initializer>false</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="89" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="89" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="mainwindow_8cpp_1acd4585dbf35a77f014296b8d5f9a30d1" prot="public" static="no" mutable="no">
        <type>bool</type>
        <definition>bool pass_them_as_albums</definition>
        <argsstring></argsstring>
        <name>pass_them_as_albums</name>
        <initializer>true</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="90" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="90" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="mainwindow_8cpp_1a2be4ab79f1259f10af556108bc88f5cb" prot="public" static="no" mutable="no">
        <type>bool</type>
        <definition>bool notification_first_time</definition>
        <argsstring></argsstring>
        <name>notification_first_time</name>
        <initializer>true</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="91" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="91" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="mainwindow_8cpp_1a2effe0844099f876464abae594ff1fb2" prot="public" static="no" mutable="no">
        <type>NotifyNotification *</type>
        <definition>NotifyNotification* notification</definition>
        <argsstring></argsstring>
        <name>notification</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="93" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="93" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="mainwindow_8cpp_1a6e33a04ebc80fee4946b364681fecffd" prot="public" static="no" mutable="no">
        <type>gboolean</type>
        <definition>gboolean success</definition>
        <argsstring></argsstring>
        <name>success</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="94" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="94" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="mainwindow_8cpp_1abc39a4bba3587c275762137dee2c3fc1" prot="public" static="no" mutable="no">
        <type>GError *</type>
        <definition>GError* error</definition>
        <argsstring></argsstring>
        <name>error</name>
        <initializer> NULL</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp" line="95" bodyfile="/home/maxmahem/wallch-2.0/mainwindow.cpp" bodystart="95" bodyend="-1"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*Wallch<sp/>-<sp/>WallpaperChanger</highlight></codeline>
<codeline lineno="2"><highlight class="comment">A<sp/>tool<sp/>for<sp/>changing<sp/>Desktop<sp/>Wallpapers<sp/>automatically</highlight></codeline>
<codeline lineno="3"><highlight class="comment">with<sp/>lots<sp/>of<sp/>features</highlight></codeline>
<codeline lineno="4"><highlight class="comment">Copyright<sp/>Â©<sp/>2011<sp/>by<sp/>Alex<sp/>Solanos<sp/>and<sp/>Leon<sp/>Vytanos</highlight></codeline>
<codeline lineno="5"><highlight class="comment"></highlight></codeline>
<codeline lineno="6"><highlight class="comment">This<sp/>program<sp/>is<sp/>free<sp/>software;<sp/>you<sp/>can<sp/>redistribute<sp/>it<sp/>and/or</highlight></codeline>
<codeline lineno="7"><highlight class="comment">modify<sp/>it<sp/>under<sp/>the<sp/>terms<sp/>of<sp/>the<sp/>GNU<sp/>General<sp/>Public<sp/>License</highlight></codeline>
<codeline lineno="8"><highlight class="comment">as<sp/>published<sp/>by<sp/>the<sp/>Free<sp/>Software<sp/>Foundation;<sp/>either<sp/>version<sp/>3</highlight></codeline>
<codeline lineno="9"><highlight class="comment">of<sp/>the<sp/>License,<sp/>or<sp/>(at<sp/>your<sp/>option)<sp/>any<sp/>later<sp/>version.</highlight></codeline>
<codeline lineno="10"><highlight class="comment"></highlight></codeline>
<codeline lineno="11"><highlight class="comment">This<sp/>program<sp/>is<sp/>distributed<sp/>in<sp/>the<sp/>hope<sp/>that<sp/>it<sp/>will<sp/>be<sp/>useful,</highlight></codeline>
<codeline lineno="12"><highlight class="comment">but<sp/>WITHOUT<sp/>ANY<sp/>WARRANTY;<sp/>without<sp/>even<sp/>the<sp/>implied<sp/>warranty<sp/>of</highlight></codeline>
<codeline lineno="13"><highlight class="comment">MERCHANTABILITY<sp/>or<sp/>FITNESS<sp/>FOR<sp/>A<sp/>PARTICULAR<sp/>PURPOSE.<sp/><sp/>See<sp/>the</highlight></codeline>
<codeline lineno="14"><highlight class="comment">GNU<sp/>General<sp/>Public<sp/>License<sp/>for<sp/>more<sp/>details.</highlight></codeline>
<codeline lineno="15"><highlight class="comment"></highlight></codeline>
<codeline lineno="16"><highlight class="comment">You<sp/>should<sp/>have<sp/>received<sp/>a<sp/>copy<sp/>of<sp/>the<sp/>GNU<sp/>General<sp/>Public<sp/>License</highlight></codeline>
<codeline lineno="17"><highlight class="comment">along<sp/>with<sp/>this<sp/>program;<sp/>if<sp/>not,<sp/>write<sp/>to<sp/>the<sp/>Free<sp/>Software</highlight></codeline>
<codeline lineno="18"><highlight class="comment">Foundation,<sp/>Inc.,<sp/>51<sp/>Franklin<sp/>Street,<sp/>Fifth<sp/>Floor,<sp/>Boston,<sp/>MA<sp/><sp/>02110-1301,<sp/>USA.*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight></codeline>
<codeline lineno="20" refid="mainwindow_8cpp_1ab5522b54e1fe7195735f5a405f026039" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>QT_NO_KEYWORDS</highlight></codeline>
<codeline lineno="21"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="mainwindow_8h" kindref="compound">mainwindow.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="ui__mainwindow_8h" kindref="compound">ui_mainwindow.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="preferences_8h" kindref="compound">preferences.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="about_8h" kindref="compound">about.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="properties_8h" kindref="compound">properties.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="extras_8h" kindref="compound">extras.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="QOpenCVWidget_8h" kindref="compound">QOpenCVWidget.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;glob.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;sys/stat.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;opencv/cv.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;opencv/highgui.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;libnotify/notify.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;fstream&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;iostream&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QMessageBox&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QClipboard&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QtDBus/QtDBus&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QtDBus/QDBusMessage&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QUrl&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QTransform&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QDrag&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QProgressDialog&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QFileDialog&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QTextStream&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QAction&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QSettings&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QRect&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QDesktopWidget&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QSystemTrayIcon&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QCloseEvent&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QMenu&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QShortcut&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QListWidgetItem&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QListWidget&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QWidget&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QtConcurrentRun&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QtNetwork/QNetworkAccessManager&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QtNetwork/QNetworkReply&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QtNetwork/QNetworkRequest&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QDesktopServices&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;SFML/Audio.hpp&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;gconf/gconf-client.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight><highlight class="keyword">using<sp/>namespace<sp/></highlight><highlight class="normal">std;</highlight></codeline>
<codeline lineno="70"><highlight class="normal"></highlight></codeline>
<codeline lineno="71" refid="mainwindow_8cpp_1afe228fb35e2737cb1becbbe9b4308614" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="mainwindow_8cpp_1afe228fb35e2737cb1becbbe9b4308614" kindref="member">_live_earth_running_</ref>=0;</highlight></codeline>
<codeline lineno="72" refid="mainwindow_8cpp_1a532748c39d92699468edec43c58d8b06" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="mainwindow_8cpp_1a532748c39d92699468edec43c58d8b06" kindref="member">_on_boot_once_running_</ref>;</highlight></codeline>
<codeline lineno="73" refid="mainwindow_8cpp_1aa87fa99b597a16b7c625e511ebbb5581" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="mainwindow_8cpp_1aa87fa99b597a16b7c625e511ebbb5581" kindref="member">_on_boot_constant_running_</ref>;</highlight></codeline>
<codeline lineno="74" refid="mainwindow_8cpp_1a652f3ec6c0e23f72e16fa43bf0b407f1" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="mainwindow_8cpp_1a652f3ec6c0e23f72e16fa43bf0b407f1" kindref="member">seconds_left</ref>=0;</highlight></codeline>
<codeline lineno="75" refid="mainwindow_8cpp_1acd8df10a3a7630b3ff5ea0c2b597922e" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="mainwindow_8cpp_1acd8df10a3a7630b3ff5ea0c2b597922e" kindref="member">random_first</ref>=0;</highlight></codeline>
<codeline lineno="76" refid="mainwindow_8cpp_1affd617bf010aaf31a24e8b51f6afeea4" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="mainwindow_8cpp_1a7106e2abc437ad981830d14176d15f09" kindref="member">number</ref>=0,<sp/><ref refid="mainwindow_8cpp_1affd617bf010aaf31a24e8b51f6afeea4" kindref="member">tmp_number</ref>=0;</highlight></codeline>
<codeline lineno="77" refid="mainwindow_8cpp_1a8715771c19d8223abb2abe25f5f06be0" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="mainwindow_8cpp_1a8715771c19d8223abb2abe25f5f06be0" kindref="member">seconds_minutes_hours</ref>=0;</highlight></codeline>
<codeline lineno="78" refid="mainwindow_8cpp_1ad169bac577628d452c8ddddffcd2c22c" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="mainwindow_8cpp_1ad169bac577628d452c8ddddffcd2c22c" kindref="member">tmp_seconds_minutes_hours</ref>=0;</highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight></codeline>
<codeline lineno="80" refid="mainwindow_8cpp_1a96203077ee28957ab99fcabaf70abc0f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="mainwindow_8cpp_1a96203077ee28957ab99fcabaf70abc0f" kindref="member">pref</ref>=0;</highlight></codeline>
<codeline lineno="81" refid="mainwindow_8cpp_1aeb84694c28fdf361868a5234d9d74db7" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="mainwindow_8cpp_1aeb84694c28fdf361868a5234d9d74db7" kindref="member">add</ref>=0;</highlight></codeline>
<codeline lineno="82" refid="mainwindow_8cpp_1a57575a2e64cb4b9f815d1cb540689402" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="mainwindow_8cpp_1a57575a2e64cb4b9f815d1cb540689402" kindref="member">show_notification</ref>;</highlight></codeline>
<codeline lineno="83" refid="mainwindow_8cpp_1a2f73f86b6ed098ec989ba1767b5e8c2b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="mainwindow_8cpp_1a2f73f86b6ed098ec989ba1767b5e8c2b" kindref="member">minimize_to_tray</ref>=0;</highlight></codeline>
<codeline lineno="84" refid="mainwindow_8cpp_1af9a76d8fef8b0c2cb8c58535f33801c1" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="mainwindow_8cpp_1af9a76d8fef8b0c2cb8c58535f33801c1" kindref="member">properties_times</ref>=0;</highlight></codeline>
<codeline lineno="85" refid="mainwindow_8cpp_1af16ca7cafa7596c54976c19ee1223e4c" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="mainwindow_8cpp_1af16ca7cafa7596c54976c19ee1223e4c" kindref="member">close_minimize_app</ref>=0;</highlight></codeline>
<codeline lineno="86" refid="mainwindow_8cpp_1abe45c1cc4b6d92ec1d811272ee2de8a0" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="mainwindow_8cpp_1abe45c1cc4b6d92ec1d811272ee2de8a0" kindref="member">propertieswindow</ref>=0;</highlight></codeline>
<codeline lineno="87"><highlight class="normal"></highlight></codeline>
<codeline lineno="88" refid="mainwindow_8cpp_1a98dda529b7c9c1d6bb6edf3644a1954f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="mainwindow_8cpp_1a98dda529b7c9c1d6bb6edf3644a1954f" kindref="member">extras_shown</ref>=</highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="89" refid="mainwindow_8cpp_1a766fcc640f3cd66e7b53c55ec392c842" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="mainwindow_8cpp_1a766fcc640f3cd66e7b53c55ec392c842" kindref="member">start_just_clicked</ref>=</highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="90" refid="mainwindow_8cpp_1acd4585dbf35a77f014296b8d5f9a30d1" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="mainwindow_8cpp_1acd4585dbf35a77f014296b8d5f9a30d1" kindref="member">pass_them_as_albums</ref>=</highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="91" refid="mainwindow_8cpp_1a2be4ab79f1259f10af556108bc88f5cb" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="mainwindow_8cpp_1a2be4ab79f1259f10af556108bc88f5cb" kindref="member">notification_first_time</ref>=</highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="92"><highlight class="normal"></highlight></codeline>
<codeline lineno="93" refid="mainwindow_8cpp_1a2effe0844099f876464abae594ff1fb2" refkind="member"><highlight class="normal">NotifyNotification*<sp/><ref refid="mainwindow_8cpp_1a2effe0844099f876464abae594ff1fb2" kindref="member">notification</ref>;</highlight></codeline>
<codeline lineno="94" refid="mainwindow_8cpp_1a6e33a04ebc80fee4946b364681fecffd" refkind="member"><highlight class="normal">gboolean<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mainwindow_8cpp_1a6e33a04ebc80fee4946b364681fecffd" kindref="member">success</ref>;</highlight></codeline>
<codeline lineno="95" refid="mainwindow_8cpp_1abc39a4bba3587c275762137dee2c3fc1" refkind="member"><highlight class="normal">GError*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mainwindow_8cpp_1abc39a4bba3587c275762137dee2c3fc1" kindref="member">error</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight></codeline>
<codeline lineno="97" refid="classMainWindow_1a8b244be8b7b7db1b08de2a2acb9409db" refkind="member"><highlight class="normal"><ref refid="classMainWindow_1a8b244be8b7b7db1b08de2a2acb9409db" kindref="member">MainWindow::MainWindow</ref>(QWidget<sp/>*parent)<sp/>:<sp/>QMainWindow(parent),<sp/>ui(new<sp/>Ui::<ref refid="classMainWindow" kindref="compound">MainWindow</ref>)<sp/>{</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>set<sp/>the<sp/>application<sp/>name<sp/>&amp;<sp/>organization</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/>QCoreApplication::setOrganizationDomain(</highlight><highlight class="stringliteral">&quot;wallch.t35.me&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/>QCoreApplication::setOrganizationName(</highlight><highlight class="stringliteral">&quot;Wallch&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/>QCoreApplication::setApplicationName(</highlight><highlight class="stringliteral">&quot;Wallch&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/>QCoreApplication::setApplicationVersion(</highlight><highlight class="stringliteral">&quot;2.1&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="103"><highlight class="normal"></highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//after<sp/>all<sp/>the<sp/>basic<sp/>checks,<sp/>setting<sp/>up<sp/>the<sp/>UI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1acf4a0872c4c77d8f43a2ec66ed849b58" kindref="member">setupUi</ref>(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//listening<sp/>to<sp/>DBUS<sp/>for<sp/>another<sp/>wallch<sp/>instance/or<sp/>to<sp/>open<sp/>a<sp/>new<sp/>album/or<sp/>to<sp/>do<sp/>some<sp/>action</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/>QDBusConnection::sessionBus().connect(QString(),QString(),<sp/></highlight><highlight class="stringliteral">&quot;do.action&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;wallch_message&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(dbus_action(QString)));</highlight></codeline>
<codeline lineno="109"><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Putting<sp/>the<sp/>values<sp/>back</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/>QSettings<sp/>settingsPreferences;</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mainwindow_8cpp_1a2f73f86b6ed098ec989ba1767b5e8c2b" kindref="member">minimize_to_tray</ref>=settingsPreferences.value(</highlight><highlight class="stringliteral">&quot;preferences/minimizeToTray&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">).toBool();</highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/>QSettings<sp/>settingsItemList(</highlight><highlight class="stringliteral">&quot;Wallch&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;ItemList&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>size<sp/>=<sp/>settingsItemList.beginReadArray(</highlight><highlight class="stringliteral">&quot;listwidgetitem&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>size;<sp/>++i)<sp/>{</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>settingsItemList.setArrayIndex(i);</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QListWidgetItem<sp/>*item<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QListWidgetItem;</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>item-&gt;setText(settingsItemList.value(</highlight><highlight class="stringliteral">&quot;item&quot;</highlight><highlight class="normal">).toString());</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>item-&gt;setStatusTip(tr(</highlight><highlight class="stringliteral">&quot;Double-click<sp/>to<sp/>set<sp/>an<sp/>item<sp/>from<sp/>the<sp/>list<sp/>as<sp/>Background&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;addItem(item);</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/>settingsItemList.endArray();</highlight></codeline>
<codeline lineno="124"><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1aed2eea321894fe7a8f3e23b78fc42793" kindref="member">timerSlider</ref>-&gt;setValue(settingsPreferences.value(</highlight><highlight class="stringliteral">&quot;general/timeSlider&quot;</highlight><highlight class="normal">,<sp/>1).toInt());</highlight></codeline>
<codeline lineno="126"><highlight class="normal"></highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Setting<sp/>up<sp/>the<sp/>timer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/>update_time<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QTimer(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(update_time,<sp/>SIGNAL(timeout()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(time_updater()));</highlight></codeline>
<codeline lineno="130"><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(settingsPreferences.value(</highlight><highlight class="stringliteral">&quot;preferences/desktopNotification&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">).toBool())</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;desktopNotification<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;desktopNotification<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="135"><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(settingsPreferences.value(</highlight><highlight class="stringliteral">&quot;preferences/playSound&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">).toBool())<sp/>{</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;soundNotification=</highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="138"><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(settingsPreferences.value(</highlight><highlight class="stringliteral">&quot;preferences/customSound&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">).toBool())<sp/>{</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>TODO:<sp/>Add<sp/>logic<sp/>for<sp/>putting<sp/>in<sp/>custom<sp/>sound</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;soundNotification<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="145"><highlight class="normal"></highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Setting<sp/>up<sp/>the<sp/>tray<sp/><sp/>Icon.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/>trayIcon<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QSystemTrayIcon(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/>trayIcon-&gt;setIcon(QIcon(</highlight><highlight class="stringliteral">&quot;:/icons/Pictures/wallch.png&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/>trayIcon-&gt;setToolTip(QString(</highlight><highlight class="stringliteral">&quot;&lt;table<sp/>width=&apos;280&apos;&gt;&lt;tr&gt;&lt;td<sp/>nowrap<sp/>align=&apos;left&apos;&gt;<sp/>&lt;b&gt;Wallch&lt;/b&gt;<sp/>&lt;/td&gt;<sp/>&lt;/tr&gt;&lt;tr&gt;<sp/>&lt;td<sp/>nowrap<sp/>align=&apos;left&apos;&gt;%1%2%3%4%5%6&quot;</highlight><highlight class="normal">).arg(tr(</highlight><highlight class="stringliteral">&quot;Left<sp/>click:<sp/>Show<sp/>window<sp/>if<sp/>process<sp/>is<sp/>not<sp/>running/Next<sp/>image<sp/>if<sp/>process<sp/>is<sp/>running.&quot;</highlight><highlight class="normal">)).arg(</highlight><highlight class="stringliteral">&quot;&lt;/td&gt;&lt;/tr&gt;<sp/>&lt;tr&gt;&lt;td<sp/>nowrap<sp/>align=&apos;left&apos;&gt;&quot;</highlight><highlight class="normal">).arg(tr(</highlight><highlight class="stringliteral">&quot;Middle<sp/>click:<sp/>Exit<sp/>the<sp/>application.&quot;</highlight><highlight class="normal">)).arg(</highlight><highlight class="stringliteral">&quot;&lt;/td&gt;<sp/>&lt;/tr&gt;<sp/>&lt;tr&gt;&lt;td<sp/>nowrap<sp/>align=&apos;left&apos;&gt;&quot;</highlight><highlight class="normal">).arg(tr(</highlight><highlight class="stringliteral">&quot;Right<sp/>click:<sp/>Show<sp/>some<sp/>options.&quot;</highlight><highlight class="normal">)).arg(</highlight><highlight class="stringliteral">&quot;&lt;/td&gt;<sp/>&lt;/tr&gt;&lt;/table&gt;&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="150"><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(trayIcon,SIGNAL(activated(QSystemTrayIcon::ActivationReason)),</highlight><highlight class="keyword">this</highlight><highlight class="normal">,SLOT(<ref refid="classMainWindow_1a571e513ee5005742161fd4de81c86ca2" kindref="member">clickSysTrayIcon</ref>(QSystemTrayIcon::ActivationReason)));</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(</highlight><highlight class="keyword">this</highlight><highlight class="normal">,SIGNAL(<ref refid="classMainWindow_1a3b1f97543263266499a860cbb03b71fb" kindref="member">minimized</ref>()),</highlight><highlight class="keyword">this</highlight><highlight class="normal">,SLOT(hide()),Qt::QueuedConnection);</highlight></codeline>
<codeline lineno="153"><highlight class="normal"></highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/>QMenu<sp/>*changer_menu<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QMenu;</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/>Show_action<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QAction(tr(</highlight><highlight class="stringliteral">&quot;S&amp;how&quot;</highlight><highlight class="normal">),</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/>Show_action-&gt;setIconVisibleInMenu(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(Show_action,<sp/>SIGNAL(triggered()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(<ref refid="classMainWindow_1ac2a292cdcf39848ec42e6352f011ddd1" kindref="member">showClicked</ref>()));</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/>changer_menu-&gt;addAction(Show_action);</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/>changer_menu-&gt;addSeparator();</highlight></codeline>
<codeline lineno="160"><highlight class="normal"></highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/>Start_action<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QAction(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-playback-stop&quot;</highlight><highlight class="normal">),<sp/>tr(</highlight><highlight class="stringliteral">&quot;&amp;Start&quot;</highlight><highlight class="normal">),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/>Start_action-&gt;setIconVisibleInMenu(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(Start_action,<sp/>SIGNAL(triggered()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(on_startButton_clicked()));</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/>changer_menu-&gt;addAction(Start_action);</highlight></codeline>
<codeline lineno="165"><highlight class="normal"></highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/>Stop_action<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QAction(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-playback-stop&quot;</highlight><highlight class="normal">),<sp/>tr(</highlight><highlight class="stringliteral">&quot;&amp;Stop&quot;</highlight><highlight class="normal">),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/>Stop_action-&gt;setIconVisibleInMenu(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(Stop_action,<sp/>SIGNAL(triggered()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(on_stopButton_clicked()));</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/>changer_menu-&gt;addAction(Stop_action);</highlight></codeline>
<codeline lineno="170"><highlight class="normal"></highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/>Next_action<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QAction(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-seek-forward&quot;</highlight><highlight class="normal">),<sp/>tr(</highlight><highlight class="stringliteral">&quot;&amp;Next<sp/>Image&quot;</highlight><highlight class="normal">),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/>Next_action-&gt;setIconVisibleInMenu(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(Next_action,<sp/>SIGNAL(triggered()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(on_nextButton_clicked()));</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/>changer_menu-&gt;addAction(Next_action);</highlight></codeline>
<codeline lineno="175"><highlight class="normal"></highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/>Previous_action<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QAction(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-seek-backward&quot;</highlight><highlight class="normal">),<sp/>tr(</highlight><highlight class="stringliteral">&quot;P&amp;revious<sp/>image&quot;</highlight><highlight class="normal">),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/>Previous_action-&gt;setIconVisibleInMenu(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(Previous_action,<sp/>SIGNAL(triggered()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(on_previousButton_clicked()));</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/>changer_menu-&gt;addAction(Previous_action);</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/>changer_menu-&gt;addSeparator();</highlight></codeline>
<codeline lineno="181"><highlight class="normal"></highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/>Settings_action<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QAction(tr(</highlight><highlight class="stringliteral">&quot;P&amp;references&quot;</highlight><highlight class="normal">),</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/>Settings_action-&gt;setIconVisibleInMenu(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(Settings_action,<sp/>SIGNAL(triggered()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(<ref refid="classMainWindow_1a7aec36163c9dfeda7da43b3e0854d673" kindref="member">ShowPreferences</ref>()));</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/>changer_menu-&gt;addAction(Settings_action);</highlight></codeline>
<codeline lineno="186"><highlight class="normal"></highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/>About_action<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QAction(tr(</highlight><highlight class="stringliteral">&quot;&amp;About&quot;</highlight><highlight class="normal">),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="188"><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/>About_action-&gt;setIconVisibleInMenu(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);;</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(About_action,<sp/>SIGNAL(triggered()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(<ref refid="classMainWindow_1a95d7c8c04e09437afc222121d383a722" kindref="member">menushowabout</ref>()));</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/>changer_menu-&gt;addAction(About_action);</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/>changer_menu-&gt;addSeparator();</highlight></codeline>
<codeline lineno="193"><highlight class="normal"></highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/>Quit_action<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QAction(tr(</highlight><highlight class="stringliteral">&quot;&amp;Quit&quot;</highlight><highlight class="normal">),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/>Quit_action-&gt;setIconVisibleInMenu(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);;</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(Quit_action,<sp/>SIGNAL(triggered()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(<ref refid="classMainWindow_1a2f76e8dbbe9eca94d07919786a7c5108" kindref="member">close_minimize</ref>()));</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/>changer_menu-&gt;addAction(Quit_action);</highlight></codeline>
<codeline lineno="198"><highlight class="normal"></highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/>trayIcon-&gt;setContextMenu(changer_menu);</highlight></codeline>
<codeline lineno="200"><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//SIGNAL-SLOT<sp/>action<sp/>here</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(ui-&gt;<ref refid="classUi__MainWindow_1ac2669cdd6ec6085dbd477c3636ddab29" kindref="member">action_About</ref>,<sp/>SIGNAL(triggered()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(<ref refid="classMainWindow_1a95d7c8c04e09437afc222121d383a722" kindref="member">menushowabout</ref>()));</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(ui-&gt;<ref refid="classUi__MainWindow_1a0c698e3df44548c69ba5d38d50402d32" kindref="member">action_Preferences</ref>,<sp/>SIGNAL(triggered()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(<ref refid="classMainWindow_1a7aec36163c9dfeda7da43b3e0854d673" kindref="member">ShowPreferences</ref>()));</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(ui-&gt;<ref refid="classUi__MainWindow_1ace7456abb046b1c717cb786b1643e60e" kindref="member">actionExtras</ref>,<sp/>SIGNAL(triggered()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(<ref refid="classMainWindow_1ae3130ae3dcc5f6261fb633f52ec062a7" kindref="member">ShowExtras</ref>()));</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(ui-&gt;<ref refid="classUi__MainWindow_1a5b3976b2349b3d27d15ef51b0b09513a" kindref="member">actionQuit_Ctrl_Q</ref>,<sp/>SIGNAL(triggered()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(<ref refid="classMainWindow_1a2f76e8dbbe9eca94d07919786a7c5108" kindref="member">close_minimize</ref>()));</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(ui-&gt;<ref refid="classUi__MainWindow_1ae338c30b4948a2301c9b166b4f384671" kindref="member">action_Start</ref>,<sp/>SIGNAL(triggered()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(on_startButton_clicked()));</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(ui-&gt;<ref refid="classUi__MainWindow_1a77fdca5e1deec736a80260027d4914ae" kindref="member">actionS_top</ref>,<sp/>SIGNAL(triggered()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(on_stopButton_clicked()));</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(ui-&gt;<ref refid="classUi__MainWindow_1a738e92d19d3efa6a6c8c7054f23fbd26" kindref="member">action_Load</ref>,<sp/>SIGNAL(triggered()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(<ref refid="classMainWindow_1a692f2f28196cc9ee41b10e89c5d32922" kindref="member">load</ref>()));</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(ui-&gt;<ref refid="classUi__MainWindow_1af6c2d7008e1c022ea212377f7e1d2996" kindref="member">actionRemove_list</ref>,<sp/>SIGNAL(triggered()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(<ref refid="classMainWindow_1a202e9111e76a514c151fffa424b01b73" kindref="member">pruneList</ref>()));</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(ui-&gt;<ref refid="classUi__MainWindow_1a109a2b59e51d886849f706bf6ff4a13d" kindref="member">action_Previous_Image_Shift_Ctrl_B</ref>,<sp/>SIGNAL(triggered()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(on_previousButton_clicked()));</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(ui-&gt;<ref refid="classUi__MainWindow_1ae13b44517a6ac27b75f9068fedaf43b3" kindref="member">action_Next_Image</ref>,<sp/>SIGNAL(triggered()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(on_nextButton_clicked()));</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(ui-&gt;<ref refid="classUi__MainWindow_1a48c15a8b0d5bd0ba1289d785e76a744b" kindref="member">actionAdd_single_images</ref>,<sp/>SIGNAL(triggered()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(on_addButton_clicked()));</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(ui-&gt;<ref refid="classUi__MainWindow_1a3cae951a389067a889312a8db264268e" kindref="member">actionAdd_Folder</ref>,<sp/>SIGNAL(triggered()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(on_addfolder_clicked()));</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(ui-&gt;<ref refid="classUi__MainWindow_1aecff87ababbfe64a3e91c5129cba2274" kindref="member">save_as</ref>,<sp/>SIGNAL(triggered()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(<ref refid="classMainWindow_1ae50efe3540a13d96ec86c677ad56880c" kindref="member">save_album</ref>()));</highlight></codeline>
<codeline lineno="215"><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//setting<sp/>up<sp/>the<sp/>shortcut<sp/>keys!</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QShortcut(Qt::CTRL<sp/>+<sp/>Qt::Key_Q,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(<ref refid="classMainWindow_1a2f76e8dbbe9eca94d07919786a7c5108" kindref="member">close_minimize</ref>()));</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QShortcut(Qt::CTRL<sp/>+<sp/>Qt::Key_P,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(<ref refid="classMainWindow_1a7aec36163c9dfeda7da43b3e0854d673" kindref="member">ShowPreferences</ref>()));</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QShortcut(Qt::CTRL<sp/>+<sp/>Qt::Key_E,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(<ref refid="classMainWindow_1ae3130ae3dcc5f6261fb633f52ec062a7" kindref="member">ShowExtras</ref>()));</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QShortcut(Qt::CTRL<sp/>+<sp/>Qt::SHIFT<sp/>+<sp/>Qt::Key_S,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(on_startButton_clicked()));</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QShortcut(Qt::CTRL<sp/>+<sp/>Qt::SHIFT<sp/>+<sp/>Qt::Key_O,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(on_stopButton_clicked()));</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QShortcut(Qt::CTRL<sp/>+<sp/>Qt::SHIFT<sp/>+<sp/>Qt::Key_N,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(on_nextButton_clicked()));</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QShortcut(Qt::CTRL<sp/>+<sp/>Qt::Key_O,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(<ref refid="classMainWindow_1a692f2f28196cc9ee41b10e89c5d32922" kindref="member">load</ref>()));</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QShortcut(Qt::CTRL<sp/>+<sp/>Qt::Key_I,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(on_addButton_clicked()));</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QShortcut(Qt::CTRL<sp/>+<sp/>Qt::Key_F,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(on_addfolder_clicked()));</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QShortcut(Qt::Key_Delete,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(on_removeButton_clicked()));</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QShortcut(Qt::Key_Return,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(on_listWidget_itemDoubleClicked()));</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QShortcut(Qt::Key_F1,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(on_actionContents_triggered()));</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QShortcut(Qt::ALT<sp/>+<sp/>Qt::Key_Return,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(<ref refid="classMainWindow_1a4da9a80d3c5a312dde4fa246436d100f" kindref="member">showProperties</ref>()));</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QShortcut(Qt::SHIFT<sp/>+<sp/>Qt::CTRL<sp/>+<sp/>Qt::Key_P,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(on_previousButton_clicked()));</highlight></codeline>
<codeline lineno="231"><highlight class="normal"></highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//enabling<sp/>dragandrop<sp/>at<sp/>the<sp/>listwidget</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/>setAcceptDrops(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="234"><highlight class="normal"></highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>SetMouseTracking<sp/>to<sp/>true<sp/>so<sp/>the<sp/>items<sp/>of<sp/>the<sp/>listwidget<sp/>can<sp/>have<sp/>statusbar</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;setMouseTracking(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="237"><highlight class="normal"></highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>the<sp/>add<sp/>icon<sp/>at<sp/>the<sp/>menubar<sp/>visible</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a041df64e03e576dd5318db1d942f0c56" kindref="member">menuAdd_Files</ref>-&gt;menuAction()-&gt;setIconVisibleInMenu(1);</highlight></codeline>
<codeline lineno="240"><highlight class="normal"></highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a58a84cd3057ab5459819f986b08942b1" kindref="member">startButton</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-playback-start&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae338c30b4948a2301c9b166b4f384671" kindref="member">action_Start</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-playback-start&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a32791e01697a0fa4c2e5219b2d717a95" kindref="member">stopButton</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-playback-stop&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a77fdca5e1deec736a80260027d4914ae" kindref="member">actionS_top</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-playback-stop&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a815d904c6cdc28fc7037862121696ade" kindref="member">previousButton</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-seek-backward&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a109a2b59e51d886849f706bf6ff4a13d" kindref="member">action_Previous_Image_Shift_Ctrl_B</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-seek-backward&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ad2577b5dd34f235616d6afe36c225b27" kindref="member">nextButton</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-seek-forward&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae13b44517a6ac27b75f9068fedaf43b3" kindref="member">action_Next_Image</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-seek-forward&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae4ea0ab11a595b2a964115c05f7603f4" kindref="member">removeButton</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;list-remove&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ab1e1013dda0abf675c1b37639a0b8f51" kindref="member">removeallButton</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;edit-delete&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ac80c9560810ddceb7494fa1f77079559" kindref="member">addfolder</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;folder-new&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a3cae951a389067a889312a8db264268e" kindref="member">actionAdd_Folder</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;folder-new&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a1761410af45480e8a833dae3c88e96e4" kindref="member">addButton</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;list-add&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a5b3976b2349b3d27d15ef51b0b09513a" kindref="member">actionQuit_Ctrl_Q</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;application-exit&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a0c698e3df44548c69ba5d38d50402d32" kindref="member">action_Preferences</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;preferences-desktop&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a48c15a8b0d5bd0ba1289d785e76a744b" kindref="member">actionAdd_single_images</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;insert-image&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1adbdbc9d312e983ed7ffa1a99793eeec7" kindref="member">actionAdd_a_Wallch_album</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;list-add&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae338c30b4948a2301c9b166b4f384671" kindref="member">action_Start</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-playback-start&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/>Start_action-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-playback-start&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/>Stop_action-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-playback-stop&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/>Previous_action-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-seek-backward&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/>Next_action-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-seek-forward&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a738e92d19d3efa6a6c8c7054f23fbd26" kindref="member">action_Load</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;folder&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ace7456abb046b1c717cb786b1643e60e" kindref="member">actionExtras</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;applications-accessories&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="265"><highlight class="normal"></highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/>on_timerSlider_valueChanged(ui-&gt;<ref refid="classUi__MainWindow_1aed2eea321894fe7a8f3e23b78fc42793" kindref="member">timerSlider</ref>-&gt;value());</highlight></codeline>
<codeline lineno="267"><highlight class="normal">}</highlight></codeline>
<codeline lineno="268"><highlight class="normal"></highlight></codeline>
<codeline lineno="269"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::closeEvent(QCloseEvent<sp/>*)</highlight></codeline>
<codeline lineno="270"><highlight class="normal">{</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/>QApplication::setQuitOnLastWindowClosed(1);</highlight></codeline>
<codeline lineno="272"><highlight class="normal"></highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/>QSettings<sp/>settingsItemList(</highlight><highlight class="stringliteral">&quot;Wallch&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;ItemList&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/>settingsItemList.beginWriteArray(</highlight><highlight class="stringliteral">&quot;listwidgetitem&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;count();<sp/>++i)<sp/>{</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>settingsItemList.setArrayIndex(i);</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>settingsItemList.setValue(</highlight><highlight class="stringliteral">&quot;item&quot;</highlight><highlight class="normal">,<sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;item(i)-&gt;text()<sp/>);</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/>settingsItemList.endArray();</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/>settingsItemList.sync();</highlight></codeline>
<codeline lineno="281"><highlight class="normal"></highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/>QSettings<sp/>settingsPreferences;</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/>settingsPreferences.setValue(</highlight><highlight class="stringliteral">&quot;general/timeSlider&quot;</highlight><highlight class="normal">,<sp/>ui-&gt;<ref refid="classUi__MainWindow_1aed2eea321894fe7a8f3e23b78fc42793" kindref="member">timerSlider</ref>-&gt;value());</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/>settingsPreferences.sync();</highlight></codeline>
<codeline lineno="285"><highlight class="normal">}</highlight></codeline>
<codeline lineno="286"><highlight class="normal"></highlight></codeline>
<codeline lineno="287" refid="classMainWindow_1ae98d00a93bc118200eeef9f9bba1dba7" refkind="member"><highlight class="normal"><ref refid="classMainWindow_1ae98d00a93bc118200eeef9f9bba1dba7" kindref="member">MainWindow::~MainWindow</ref>()<sp/>{<sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>ui;<sp/>}</highlight></codeline>
<codeline lineno="288"><highlight class="normal"></highlight></codeline>
<codeline lineno="289" refid="classMainWindow_1af4ca5d0d3d18ddcb7d54b6596bbf4797" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classMainWindow_1af4ca5d0d3d18ddcb7d54b6596bbf4797" kindref="member">MainWindow::changeEvent</ref>(QEvent<sp/>*e)</highlight></codeline>
<codeline lineno="290"><highlight class="normal">{</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="mainwindow_8cpp_1a96203077ee28957ab99fcabaf70abc0f" kindref="member">pref</ref><sp/>||<sp/><ref refid="mainwindow_8cpp_1aeb84694c28fdf361868a5234d9d74db7" kindref="member">add</ref>)</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MainWindow::showNormal();</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="mainwindow_8cpp_1a2f73f86b6ed098ec989ba1767b5e8c2b" kindref="member">minimize_to_tray</ref>){<sp/></highlight><highlight class="comment">//Means<sp/>that<sp/>minimized<sp/>isn&apos;t<sp/>selected.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classMainWindow_1af4ca5d0d3d18ddcb7d54b6596bbf4797" kindref="member">QMainWindow::changeEvent</ref>(e);</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(e-&gt;type())<sp/>{</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>QEvent::LanguageChange:</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a097dd160c3534a204904cb374412c618" kindref="member">retranslateUi</ref>(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{<sp/></highlight><highlight class="comment">//Means<sp/>that<sp/>minimized<sp/>is<sp/>selected</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="303"><highlight class="normal"></highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(e-&gt;type()){</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>QEvent::LanguageChange:</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a097dd160c3534a204904cb374412c618" kindref="member">retranslateUi</ref>(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="308"><highlight class="normal"></highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//see<sp/>if<sp/>the<sp/>event<sp/>is<sp/>changing<sp/>the<sp/>window<sp/>state</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>QEvent::WindowStateChange:</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//if<sp/>it<sp/>is,<sp/>we<sp/>need<sp/>to<sp/>see<sp/>that<sp/>this<sp/>event<sp/>is<sp/>minimize</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(isMinimized())<sp/>{</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trayIcon-&gt;show();</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Q_EMIT<sp/><ref refid="classMainWindow_1a3b1f97543263266499a860cbb03b71fb" kindref="member">minimized</ref>();</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="317"><highlight class="normal"></highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="320"><highlight class="normal"></highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classMainWindow_1af4ca5d0d3d18ddcb7d54b6596bbf4797" kindref="member">QMainWindow::changeEvent</ref>(e);<sp/>}}</highlight></codeline>
<codeline lineno="322"><highlight class="normal">}</highlight></codeline>
<codeline lineno="323"><highlight class="normal"></highlight></codeline>
<codeline lineno="324" refid="classMainWindow_1a571e513ee5005742161fd4de81c86ca2" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classMainWindow_1a571e513ee5005742161fd4de81c86ca2" kindref="member">MainWindow::clickSysTrayIcon</ref>(QSystemTrayIcon::ActivationReason<sp/>reason)</highlight></codeline>
<codeline lineno="325"><highlight class="normal">{</highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//reason<sp/>is<sp/>a<sp/>variable<sp/>that<sp/>holds<sp/>the<sp/>type<sp/>of<sp/>activation<sp/>or<sp/>click<sp/>done<sp/>on<sp/>the<sp/>icon<sp/>tray</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(reason)<sp/>{</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>QSystemTrayIcon::Trigger:<sp/></highlight><highlight class="comment">//if<sp/>it&apos;s<sp/>a<sp/>normal<sp/>click</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ui-&gt;<ref refid="classUi__MainWindow_1ad2577b5dd34f235616d6afe36c225b27" kindref="member">nextButton</ref>-&gt;isEnabled()){<sp/></highlight><highlight class="comment">//change<sp/>image</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>on_nextButton_clicked();</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="mainwindow_8cpp_1a96203077ee28957ab99fcabaf70abc0f" kindref="member">pref</ref>)<sp/>{<sp/></highlight><highlight class="comment">//hide<sp/>the<sp/>icon</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trayIcon-&gt;hide();</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//show<sp/>the<sp/>main<sp/>window</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;showNormal();</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>QSystemTrayIcon::MiddleClick:</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//quit<sp/>the<sp/>application</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>close();</highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>QSystemTrayIcon::Unknown:</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>QSystemTrayIcon::Context:</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="350"><highlight class="normal">}</highlight></codeline>
<codeline lineno="351"><highlight class="normal"></highlight></codeline>
<codeline lineno="352" refid="classMainWindow_1ac2a292cdcf39848ec42e6352f011ddd1" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classMainWindow_1ac2a292cdcf39848ec42e6352f011ddd1" kindref="member">MainWindow::showClicked</ref>()</highlight></codeline>
<codeline lineno="353"><highlight class="normal">{</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;showNormal();</highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/>trayIcon-&gt;hide();</highlight></codeline>
<codeline lineno="356"><highlight class="normal">}</highlight></codeline>
<codeline lineno="357"><highlight class="normal"></highlight></codeline>
<codeline lineno="358"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::livearth(){</highlight><highlight class="comment">//try<sp/>to<sp/>ping<sp/>google</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>online<sp/>=<sp/>system(</highlight><highlight class="stringliteral">&quot;ping<sp/>-c<sp/>1<sp/>google.com<sp/>&gt;<sp/>/dev/null&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>online<sp/>!=<sp/>0<sp/>){<sp/></highlight><highlight class="comment">//Unable<sp/>to<sp/>reach<sp/>google</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QMessageBox<sp/>msgBox;</highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msgBox.setWindowTitle(tr(</highlight><highlight class="stringliteral">&quot;Live<sp/>Earth<sp/>Wallpaper&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msgBox.setText(</highlight><highlight class="stringliteral">&quot;&lt;b&gt;&quot;</highlight><highlight class="normal">+tr(</highlight><highlight class="stringliteral">&quot;Unable<sp/>to<sp/>connect&quot;</highlight><highlight class="normal">)+</highlight><highlight class="stringliteral">&quot;.&lt;/b&gt;&lt;br&gt;&quot;</highlight><highlight class="normal">+tr(</highlight><highlight class="stringliteral">&quot;Check<sp/>your<sp/>internet<sp/>connection!&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msgBox.setIconPixmap(QIcon(</highlight><highlight class="stringliteral">&quot;:/icons/Pictures/earth.png&quot;</highlight><highlight class="normal">).pixmap(QSize(100,100)));</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msgBox.setWindowIcon(QIcon(</highlight><highlight class="stringliteral">&quot;:/icons/Pictures/wallch.png&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msgBox.exec();</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>earth_timer<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QTimer(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>connect(earth_timer,SIGNAL(timeout()),</highlight><highlight class="keyword">this</highlight><highlight class="normal">,SLOT(start_livearth_extras_concurrent_thread()));</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mainwindow_8cpp_1afe228fb35e2737cb1becbbe9b4308614" kindref="member">_live_earth_running_</ref>=1;</highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QtConcurrent::run(</highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>&amp;MainWindow::livearth_extras);</highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>earth_timer-&gt;start(1800000);</highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QMessageBox<sp/>msgBox;</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msgBox.setWindowTitle(tr(</highlight><highlight class="stringliteral">&quot;Live<sp/>Earth<sp/>Wallpaper&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msgBox.setText(tr(</highlight><highlight class="stringliteral">&quot;Live<sp/>Earth<sp/>Wallpaper<sp/>is<sp/>active&lt;br&gt;and<sp/>it<sp/>will<sp/>change<sp/>every<sp/>30<sp/>minutes!&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msgBox.setIconPixmap(QIcon(</highlight><highlight class="stringliteral">&quot;:/icons/Pictures/earth.png&quot;</highlight><highlight class="normal">).pixmap(QSize(100,100)));</highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msgBox.setWindowIcon(QIcon(</highlight><highlight class="stringliteral">&quot;:/icons/Pictures/wallch.png&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msgBox.exec();</highlight></codeline>
<codeline lineno="380"><highlight class="normal">}</highlight></codeline>
<codeline lineno="381"><highlight class="normal"></highlight></codeline>
<codeline lineno="382"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::start_livearth_extras_concurrent_thread(){</highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/>QtConcurrent::run(</highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>&amp;MainWindow::livearth_extras);</highlight></codeline>
<codeline lineno="384"><highlight class="normal">}</highlight></codeline>
<codeline lineno="385"><highlight class="normal"></highlight></codeline>
<codeline lineno="386"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::stop_livearth(){</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(earth_timer-&gt;isActive())</highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>earth_timer-&gt;stop();</highlight></codeline>
<codeline lineno="389"><highlight class="normal">}</highlight></codeline>
<codeline lineno="390"><highlight class="normal"></highlight></codeline>
<codeline lineno="391"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::livearth_extras(){</highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/>QSettings<sp/>settingsExtra(<sp/></highlight><highlight class="stringliteral">&quot;Wallch&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;Extras&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="393"><highlight class="normal"></highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/>QUrl<sp/>url(</highlight><highlight class="stringliteral">&quot;http://www.opentopia.com/images/data/sunlight/&quot;</highlight><highlight class="normal">+settingsExtra.value(</highlight><highlight class="stringliteral">&quot;liveEarthFileName&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;world_sunlight_map_rectangular.jpg&quot;</highlight><highlight class="normal">).toString());</highlight></codeline>
<codeline lineno="395"><highlight class="normal"></highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/>reply<sp/>=<sp/>qnam.get(QNetworkRequest(url));</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(reply,<sp/>SIGNAL(finished()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(httpFinished()));</highlight></codeline>
<codeline lineno="398"><highlight class="normal">}</highlight></codeline>
<codeline lineno="399"><highlight class="normal"></highlight></codeline>
<codeline lineno="400"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::httpFinished()<sp/>{</highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(reply-&gt;error())<sp/>{</highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cerr<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;Download<sp/>failed...\n&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//QT<sp/>doesn&apos;t<sp/>overwite,<sp/>so<sp/>we<sp/>have<sp/>to<sp/>remove<sp/>manually</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QFile::remove(QString(</highlight><highlight class="stringliteral">&quot;~/.config/Wallch/world.jpg&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="406"><highlight class="normal"></highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QFile<sp/>file(QString(</highlight><highlight class="stringliteral">&quot;~/.config/Wallch/world.jpg&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!file.open(QIODevice::WriteOnly))<sp/>{</highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cerr<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;Couldn&apos;t<sp/>save<sp/>the<sp/>file...<sp/>mw\n&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file.write(reply-&gt;readAll());</highlight></codeline>
<codeline lineno="412"><highlight class="normal"></highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MainWindow::changeBackground(QString(</highlight><highlight class="stringliteral">&quot;~/.config/Wallch/world.jpg&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="416"><highlight class="normal"></highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/>reply-&gt;deleteLater();</highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/>reply<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="419"><highlight class="normal">}</highlight></codeline>
<codeline lineno="420"><highlight class="normal"></highlight></codeline>
<codeline lineno="421"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::on_addButton_clicked()</highlight></codeline>
<codeline lineno="422"><highlight class="normal">{</highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!ui-&gt;<ref refid="classUi__MainWindow_1a1761410af45480e8a833dae3c88e96e4" kindref="member">addButton</ref>-&gt;isEnabled())</highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/>QStringList<sp/>path;</highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/><sp/><sp/>path<sp/>=<sp/>QFileDialog::getOpenFileNames(</highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>tr(</highlight><highlight class="stringliteral">&quot;Choose<sp/>Pictures&quot;</highlight><highlight class="normal">),<sp/>QDir::homePath(),<sp/></highlight><highlight class="stringliteral">&quot;*png<sp/>*gif<sp/>*bmp<sp/>*jpg<sp/>*jpeg&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mainwindow_8cpp_1aeb84694c28fdf361868a5234d9d74db7" kindref="member">add</ref>=0;</highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(path.count()<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="430"><highlight class="normal"></highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>count=0;<sp/>count<sp/>&lt;<sp/>path.count();<sp/>count++)<sp/>{</highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QString<sp/>qstr<sp/>=<sp/>path[count];</highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QListWidgetItem<sp/>*item<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QListWidgetItem;</highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>item-&gt;setText(qstr);</highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>item-&gt;setStatusTip(tr(</highlight><highlight class="stringliteral">&quot;Double-click<sp/>to<sp/>set<sp/>an<sp/>item<sp/>from<sp/>the<sp/>list<sp/>as<sp/>Background&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;addItem(item);</highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="438"><highlight class="normal">}</highlight></codeline>
<codeline lineno="439"><highlight class="normal"></highlight></codeline>
<codeline lineno="440"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::on_removeButton_clicked()</highlight></codeline>
<codeline lineno="441"><highlight class="normal">{</highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;currentItem();</highlight></codeline>
<codeline lineno="443"><highlight class="normal">}</highlight></codeline>
<codeline lineno="444"><highlight class="normal"></highlight></codeline>
<codeline lineno="445"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::on_removeallButton_clicked()</highlight></codeline>
<codeline lineno="446"><highlight class="normal">{</highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1aecff87ababbfe64a3e91c5129cba2274" kindref="member">save_as</ref>-&gt;setEnabled(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;clear();</highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a0e90c7e9ad77386881e0b264ddb9dd22" kindref="member">label_9</ref>-&gt;clear();</highlight></codeline>
<codeline lineno="450"><highlight class="normal">}</highlight></codeline>
<codeline lineno="451"><highlight class="normal"></highlight></codeline>
<codeline lineno="452"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::on_listWidget_itemSelectionChanged()</highlight></codeline>
<codeline lineno="453"><highlight class="normal">{</highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/>QString<sp/>filename<sp/>=<sp/>QString::fromUtf8(ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;item(ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;currentRow())-&gt;text().toUtf8());</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a0e90c7e9ad77386881e0b264ddb9dd22" kindref="member">label_9</ref>-&gt;setBackgroundRole(QPalette::Base);</highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/>QImage<sp/><ref refid="properties_8cpp_1a059f1ba11b788625374af681fe29b2f3" kindref="member">image</ref>(filename);</highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a0e90c7e9ad77386881e0b264ddb9dd22" kindref="member">label_9</ref>-&gt;setPixmap(QPixmap::fromImage(<ref refid="properties_8cpp_1a059f1ba11b788625374af681fe29b2f3" kindref="member">image</ref>));</highlight></codeline>
<codeline lineno="458"><highlight class="normal">}</highlight></codeline>
<codeline lineno="459"><highlight class="normal"></highlight></codeline>
<codeline lineno="460"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::on_listWidget_itemDoubleClicked()</highlight></codeline>
<codeline lineno="461"><highlight class="normal">{</highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/><sp/><sp/>MainWindow::changeBackground(ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;currentItem()-&gt;text());</highlight></codeline>
<codeline lineno="463"><highlight class="normal">}</highlight></codeline>
<codeline lineno="464"><highlight class="normal"></highlight></codeline>
<codeline lineno="465" refid="classMainWindow_1a202e9111e76a514c151fffa424b01b73" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classMainWindow_1a202e9111e76a514c151fffa424b01b73" kindref="member">MainWindow::pruneList</ref>()</highlight></codeline>
<codeline lineno="466"><highlight class="normal">{</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>count<sp/>=<sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;count();</highlight></codeline>
<codeline lineno="468"><highlight class="normal"></highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i=0;<sp/>i<sp/>&lt;<sp/>count;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(QFile(ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;item(i)-&gt;text()).exists()<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;item(i);</highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="474"><highlight class="normal">}</highlight></codeline>
<codeline lineno="475"><highlight class="normal"></highlight></codeline>
<codeline lineno="476" refid="classMainWindow_1aea6d2dc29c9cb6f4848a540ba3e5007e" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classMainWindow_1aea6d2dc29c9cb6f4848a540ba3e5007e" kindref="member">MainWindow::removeDisk</ref>()<sp/>{</highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(QMessageBox::warning(</highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>tr(</highlight><highlight class="stringliteral">&quot;Image<sp/>Deltion&quot;</highlight><highlight class="normal">),<sp/></highlight><highlight class="stringliteral">&quot;The<sp/>image<sp/>you<sp/>selected<sp/>will<sp/>be<sp/>permently<sp/>deleted<sp/>from<sp/>your<sp/>disk.&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QMessageBox::Ok<sp/>|<sp/>QMessageBox::Cancel)</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>==<sp/>QMessageBox::Ok)</highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QFile::remove(ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;currentItem()-&gt;text());</highlight></codeline>
<codeline lineno="481"><highlight class="normal"></highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;currentItem();</highlight></codeline>
<codeline lineno="483"><highlight class="normal">}</highlight></codeline>
<codeline lineno="484"><highlight class="normal"></highlight></codeline>
<codeline lineno="485" refid="classMainWindow_1a692f2f28196cc9ee41b10e89c5d32922" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classMainWindow_1a692f2f28196cc9ee41b10e89c5d32922" kindref="member">MainWindow::load</ref>()<sp/>{</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!ui-&gt;<ref refid="classUi__MainWindow_1a738e92d19d3efa6a6c8c7054f23fbd26" kindref="member">action_Load</ref>-&gt;isEnabled())<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/>QString<sp/>Qpath;</highlight></codeline>
<codeline lineno="488"><highlight class="normal"></highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/><sp/>Qpath<sp/>=<sp/>QFileDialog::getOpenFileName(</highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>tr(</highlight><highlight class="stringliteral">&quot;Choose<sp/>Album&quot;</highlight><highlight class="normal">),<sp/>QDir::homePath(),<sp/></highlight><highlight class="stringliteral">&quot;*.wallch&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="490"><highlight class="normal"></highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(Qpath.count()<sp/>==<sp/>0)<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a0e90c7e9ad77386881e0b264ddb9dd22" kindref="member">label_9</ref>-&gt;clear();</highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*path<sp/>=<sp/>Qpath.toUtf8().data();</highlight></codeline>
<codeline lineno="493"><highlight class="normal"></highlight></codeline>
<codeline lineno="494"><highlight class="normal"><sp/><sp/><sp/><sp/>FILE<sp/>*file=fopen(path,</highlight><highlight class="stringliteral">&quot;r&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="495"><highlight class="normal"></highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(file!=NULL)<sp/>{</highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ifstream<sp/>file(path)<sp/>;</highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>line<sp/>;</highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(getline(file,line))<sp/>{</highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QString<sp/>qstr<sp/>=<sp/>QString::fromUtf8(line.c_str());</highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QListWidgetItem<sp/>*item<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QListWidgetItem;</highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>item-&gt;setText(qstr);</highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>item-&gt;setStatusTip(tr(</highlight><highlight class="stringliteral">&quot;Double-click<sp/>to<sp/>set<sp/>an<sp/>item<sp/>from<sp/>the<sp/>list<sp/>as<sp/>Background&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;addItem(item);</highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="507"><highlight class="normal"></highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/><sp/>fclose<sp/>(<sp/>file<sp/>);</highlight></codeline>
<codeline lineno="509"><highlight class="normal">}</highlight></codeline>
<codeline lineno="510"><highlight class="normal"></highlight></codeline>
<codeline lineno="511" refid="classMainWindow_1a5dfecbc3190aaa5b1d4ff5fe84f8c12b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classMainWindow_1a5dfecbc3190aaa5b1d4ff5fe84f8c12b" kindref="member">MainWindow::copyPath</ref>()<sp/>{</highlight></codeline>
<codeline lineno="512"><highlight class="normal"><sp/><sp/><sp/><sp/>QClipboard<sp/>*clip<sp/>=<sp/>QApplication::clipboard();</highlight></codeline>
<codeline lineno="513"><highlight class="normal"><sp/><sp/><sp/><sp/>clip-&gt;setText(ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;currentItem()-&gt;text());</highlight></codeline>
<codeline lineno="514"><highlight class="normal">}</highlight></codeline>
<codeline lineno="515"><highlight class="normal"></highlight></codeline>
<codeline lineno="516" refid="classMainWindow_1a0d88444127f5f56a4db14d850938dfb6" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classMainWindow_1a0d88444127f5f56a4db14d850938dfb6" kindref="member">MainWindow::copyImage</ref>()<sp/>{</highlight></codeline>
<codeline lineno="517"><highlight class="normal"><sp/><sp/><sp/><sp/>QClipboard<sp/>*clip<sp/>=<sp/>QApplication::clipboard();</highlight></codeline>
<codeline lineno="518"><highlight class="normal"><sp/><sp/><sp/><sp/>clip-&gt;setImage(QImage(ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;currentItem()-&gt;text()),<sp/>QClipboard::Clipboard);</highlight></codeline>
<codeline lineno="519"><highlight class="normal">}</highlight></codeline>
<codeline lineno="520"><highlight class="normal"></highlight></codeline>
<codeline lineno="521"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::on_listWidget_customContextMenuRequested()</highlight></codeline>
<codeline lineno="522"><highlight class="normal">{</highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/><sp/><sp/>QMenu<sp/>menu;</highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/><sp/><sp/>menu.addAction(tr(</highlight><highlight class="stringliteral">&quot;Set<sp/>this<sp/>item<sp/>as<sp/>Background&quot;</highlight><highlight class="normal">),</highlight><highlight class="keyword">this</highlight><highlight class="normal">,SLOT(on_listWidget_itemDoubleClicked()));</highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/><sp/><sp/>menu.addAction(tr(</highlight><highlight class="stringliteral">&quot;Remove<sp/>non-existent<sp/>Pictures&quot;</highlight><highlight class="normal">),</highlight><highlight class="keyword">this</highlight><highlight class="normal">,SLOT(<ref refid="classMainWindow_1a202e9111e76a514c151fffa424b01b73" kindref="member">pruneList</ref>()));</highlight></codeline>
<codeline lineno="526"><highlight class="normal"><sp/><sp/><sp/><sp/>menu.addAction(tr(</highlight><highlight class="stringliteral">&quot;Delete<sp/>image<sp/>from<sp/>disk&quot;</highlight><highlight class="normal">),</highlight><highlight class="keyword">this</highlight><highlight class="normal">,SLOT(<ref refid="classMainWindow_1aea6d2dc29c9cb6f4848a540ba3e5007e" kindref="member">removeDisk</ref>()));</highlight></codeline>
<codeline lineno="527"><highlight class="normal"><sp/><sp/><sp/><sp/>menu.addAction(tr(</highlight><highlight class="stringliteral">&quot;Copy<sp/>path<sp/>to<sp/>clipboard&quot;</highlight><highlight class="normal">),</highlight><highlight class="keyword">this</highlight><highlight class="normal">,SLOT(<ref refid="classMainWindow_1a5dfecbc3190aaa5b1d4ff5fe84f8c12b" kindref="member">copyPath</ref>()));</highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><sp/>menu.addAction(tr(</highlight><highlight class="stringliteral">&quot;Copy<sp/>image<sp/>to<sp/>clipboard&quot;</highlight><highlight class="normal">),</highlight><highlight class="keyword">this</highlight><highlight class="normal">,SLOT(<ref refid="classMainWindow_1a0d88444127f5f56a4db14d850938dfb6" kindref="member">copyImage</ref>()));</highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/><sp/>menu.addAction(tr(</highlight><highlight class="stringliteral">&quot;Open<sp/>folder&quot;</highlight><highlight class="normal">),</highlight><highlight class="keyword">this</highlight><highlight class="normal">,SLOT(<ref refid="classMainWindow_1a3b43993780b5d104db3472ce7e9180e6" kindref="member">Openfolder</ref>()));</highlight></codeline>
<codeline lineno="530"><highlight class="normal"><sp/><sp/><sp/><sp/>menu.addAction(tr(</highlight><highlight class="stringliteral">&quot;Properties&quot;</highlight><highlight class="normal">),</highlight><highlight class="keyword">this</highlight><highlight class="normal">,SLOT(<ref refid="classMainWindow_1a4da9a80d3c5a312dde4fa246436d100f" kindref="member">showProperties</ref>()));</highlight></codeline>
<codeline lineno="531"><highlight class="normal"></highlight></codeline>
<codeline lineno="532"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;count()<sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="533"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>menu.exec(QCursor::pos());</highlight></codeline>
<codeline lineno="534"><highlight class="normal">}</highlight></codeline>
<codeline lineno="535"><highlight class="normal"></highlight></codeline>
<codeline lineno="536" refid="classMainWindow_1a463ad5b4c5ca193c1ba13247bedcfaca" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classMainWindow_1a463ad5b4c5ca193c1ba13247bedcfaca" kindref="member">MainWindow::errorstopprocess</ref>()</highlight></codeline>
<codeline lineno="537"><highlight class="normal">{</highlight></codeline>
<codeline lineno="538"><highlight class="normal"><sp/><sp/><sp/><sp/>QMessageBox<sp/>msgBox;msgBox.setWindowTitle(</highlight><highlight class="stringliteral">&quot;Error!&quot;</highlight><highlight class="normal">);msgBox.setText(tr(</highlight><highlight class="stringliteral">&quot;In<sp/>order<sp/>to<sp/>change<sp/>the<sp/>current<sp/>Desktop<sp/>Wallpaper,<sp/>please<sp/>stop<sp/>the<sp/>current<sp/>process.&quot;</highlight><highlight class="normal">));msgBox.setIconPixmap(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;dialog-information&quot;</highlight><highlight class="normal">).pixmap(QSize(56,56)));msgBox.setWindowIcon(QIcon(</highlight><highlight class="stringliteral">&quot;:/icons/Pictures/wallch.png&quot;</highlight><highlight class="normal">));msgBox.exec();</highlight></codeline>
<codeline lineno="539"><highlight class="normal">}</highlight></codeline>
<codeline lineno="540"><highlight class="normal"></highlight></codeline>
<codeline lineno="541"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::on_addfolder_clicked()</highlight></codeline>
<codeline lineno="542"><highlight class="normal">{</highlight></codeline>
<codeline lineno="543"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!ui-&gt;<ref refid="classUi__MainWindow_1ac80c9560810ddceb7494fa1f77079559" kindref="member">addfolder</ref>-&gt;isEnabled())<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="mainwindow_8cpp_1a2f73f86b6ed098ec989ba1767b5e8c2b" kindref="member">minimize_to_tray</ref>)<sp/><ref refid="mainwindow_8cpp_1aeb84694c28fdf361868a5234d9d74db7" kindref="member">add</ref>=1;</highlight></codeline>
<codeline lineno="545"><highlight class="normal"><sp/><sp/><sp/><sp/>QString<sp/>qpath;</highlight></codeline>
<codeline lineno="546"><highlight class="normal"><sp/><sp/><sp/><sp/>qpath<sp/>=<sp/>QFileDialog::getExistingDirectory(</highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>tr(</highlight><highlight class="stringliteral">&quot;Choose<sp/>Folder&quot;</highlight><highlight class="normal">),<sp/>QDir::homePath());</highlight></codeline>
<codeline lineno="547"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mainwindow_8cpp_1aeb84694c28fdf361868a5234d9d74db7" kindref="member">add</ref>=0;</highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(qpath.count()<sp/>==<sp/>0)<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="549"><highlight class="normal"><sp/><sp/><sp/><sp/>QFile<sp/>file9(<sp/>QDir::homePath()+</highlight><highlight class="stringliteral">&quot;/.config/Wallch/Checks/add_folder&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="550"><highlight class="normal"></highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>file9.open(<sp/>QIODevice::WriteOnly<sp/>)<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>file<sp/>opened<sp/>and<sp/>is<sp/>overwriten<sp/>with<sp/>WriteOnly</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>QTextStream<sp/>textStream(<sp/>&amp;file9<sp/>);</highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>textStream<sp/>&lt;&lt;<sp/>qpath;</highlight></codeline>
<codeline lineno="555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>file9.close();</highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="557"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//find<sp/>pictures</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="558"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(system(</highlight><highlight class="stringliteral">&quot;find<sp/>\&quot;$(cat<sp/>~/.config/Wallch/Checks/add_folder)\&quot;<sp/>\\(<sp/>-name<sp/>\&quot;*.png\&quot;<sp/>-o<sp/>-name<sp/>\&quot;*.gif\&quot;<sp/>-o<sp/>-name<sp/>\&quot;*.bmp\&quot;<sp/>-o<sp/>-name<sp/>\&quot;*jpg\&quot;<sp/>-o<sp/>-name<sp/>\&quot;*jpeg\&quot;<sp/><sp/>-o<sp/>-name<sp/>\&quot;*PNG\&quot;<sp/>-o<sp/>-name<sp/>\&quot;*.GIF\&quot;<sp/>-o<sp/>-name<sp/>\&quot;*.BMP\&quot;<sp/>-o<sp/>-name<sp/>\&quot;*JPG\&quot;<sp/>-o<sp/>-name<sp/>\&quot;*JPEG\&quot;<sp/>\\)<sp/>-print<sp/>&gt;<sp/>~/.config/Wallch/Checks/add_folder_pics&quot;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cerr<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;Error<sp/>while<sp/>trying<sp/>to<sp/>use<sp/>command<sp/>&apos;find&apos;\n&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="560"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//add<sp/>files<sp/>to<sp/>listwidget</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="561"><highlight class="normal"><sp/><sp/><sp/><sp/>FILE<sp/>*file<sp/>=<sp/>fopen<sp/>(<sp/>QString(QDir::homePath()+</highlight><highlight class="stringliteral">&quot;/.config/Wallch/Checks/add_folder_pics&quot;</highlight><highlight class="normal">).toLocal8Bit().data(),<sp/></highlight><highlight class="stringliteral">&quot;r&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="562"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(file<sp/>!=<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ifstream<sp/>file(<sp/>QString(QDir::homePath()+</highlight><highlight class="stringliteral">&quot;/.config/Wallch/Checks/add_folder_pics&quot;</highlight><highlight class="normal">).toLocal8Bit().data()<sp/>)<sp/>;</highlight></codeline>
<codeline lineno="564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>line<sp/>;</highlight></codeline>
<codeline lineno="565"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(std::getline(file,<sp/>line<sp/>))<sp/>{</highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QString<sp/>qstr<sp/>=<sp/>QString::fromUtf8(line.c_str());</highlight></codeline>
<codeline lineno="567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QListWidgetItem<sp/>*item<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QListWidgetItem;</highlight></codeline>
<codeline lineno="568"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>item-&gt;setText(qstr);</highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>item-&gt;setStatusTip(tr(</highlight><highlight class="stringliteral">&quot;Double-click<sp/>to<sp/>set<sp/>an<sp/>item<sp/>from<sp/>the<sp/>list<sp/>as<sp/>Background&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;addItem(item);</highlight></codeline>
<codeline lineno="571"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="572"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="573"><highlight class="normal"></highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/><sp/><sp/>fclose<sp/>(<sp/>file<sp/>);</highlight></codeline>
<codeline lineno="575"><highlight class="normal"></highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//remove<sp/>temp<sp/>files<sp/>used</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="577"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(system(</highlight><highlight class="stringliteral">&quot;rm<sp/>-rf<sp/>~/.config/Wallch/Checks/add_fodler*&quot;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="578"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cerr<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;Error<sp/>while<sp/>trying<sp/>to<sp/>remove<sp/>~/.config/Wallch/Checks/add_folder*<sp/>.Please<sp/>check<sp/>file(s)<sp/>permissions!&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="579"><highlight class="normal"></highlight></codeline>
<codeline lineno="580"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;count()<sp/>&gt;=<sp/>3<sp/>)<sp/>ui-&gt;<ref refid="classUi__MainWindow_1aecff87ababbfe64a3e91c5129cba2274" kindref="member">save_as</ref>-&gt;setEnabled(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="581"><highlight class="normal">}</highlight></codeline>
<codeline lineno="582"><highlight class="normal"></highlight></codeline>
<codeline lineno="583" refid="classMainWindow_1a2f76e8dbbe9eca94d07919786a7c5108" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classMainWindow_1a2f76e8dbbe9eca94d07919786a7c5108" kindref="member">MainWindow::close_minimize</ref>()</highlight></codeline>
<codeline lineno="584"><highlight class="normal">{</highlight></codeline>
<codeline lineno="585"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mainwindow_8cpp_1a2f73f86b6ed098ec989ba1767b5e8c2b" kindref="member">minimize_to_tray</ref>=0;</highlight></codeline>
<codeline lineno="586"><highlight class="normal"><sp/><sp/><sp/><sp/>close();</highlight></codeline>
<codeline lineno="587"><highlight class="normal">}</highlight></codeline>
<codeline lineno="588"><highlight class="normal"></highlight></codeline>
<codeline lineno="589"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::dragEnterEvent(QDragEnterEvent<sp/>*event)</highlight></codeline>
<codeline lineno="590"><highlight class="normal">{</highlight></codeline>
<codeline lineno="591"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!ui-&gt;<ref refid="classUi__MainWindow_1a1761410af45480e8a833dae3c88e96e4" kindref="member">addButton</ref>-&gt;isEnabled())<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="592"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event-&gt;mimeData()-&gt;hasFormat(</highlight><highlight class="stringliteral">&quot;text/plain&quot;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="593"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>event-&gt;acceptProposedAction();</highlight></codeline>
<codeline lineno="594"><highlight class="normal">}</highlight></codeline>
<codeline lineno="595"><highlight class="normal"></highlight></codeline>
<codeline lineno="596"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::dropEvent(QDropEvent<sp/>*event)</highlight></codeline>
<codeline lineno="597"><highlight class="normal">{</highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/><sp/><sp/>QList&lt;QUrl&gt;<sp/>urlList<sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">-&gt;mimeData()-&gt;urls();</highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(QList&lt;QUrl&gt;::const_iterator<sp/>i<sp/>=<sp/>urlList.begin();<sp/>i<sp/>!=<sp/>urlList.end();i++)</highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="601"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QString<sp/>strFile2<sp/>=<sp/>(*i).toString();</highlight></codeline>
<codeline lineno="602"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(strFile2.endsWith(</highlight><highlight class="stringliteral">&quot;.png&quot;</highlight><highlight class="normal">)<sp/>||<sp/>strFile2.endsWith(</highlight><highlight class="stringliteral">&quot;.gif&quot;</highlight><highlight class="normal">)<sp/>||<sp/>strFile2.endsWith(</highlight><highlight class="stringliteral">&quot;.bmp&quot;</highlight><highlight class="normal">)<sp/>||<sp/>strFile2.endsWith(</highlight><highlight class="stringliteral">&quot;.jpg&quot;</highlight><highlight class="normal">)<sp/>||<sp/>strFile2.endsWith(</highlight><highlight class="stringliteral">&quot;.jpeg&quot;</highlight><highlight class="normal">)<sp/>||<sp/>strFile2.endsWith(</highlight><highlight class="stringliteral">&quot;.PNG&quot;</highlight><highlight class="normal">)<sp/>||<sp/>strFile2.endsWith(</highlight><highlight class="stringliteral">&quot;.GIF&quot;</highlight><highlight class="normal">)<sp/>||<sp/>strFile2.endsWith(</highlight><highlight class="stringliteral">&quot;.BMP&quot;</highlight><highlight class="normal">)<sp/>||<sp/>strFile2.endsWith(</highlight><highlight class="stringliteral">&quot;.JPG&quot;</highlight><highlight class="normal">)<sp/>||<sp/>strFile2.endsWith(</highlight><highlight class="stringliteral">&quot;.JPEG&quot;</highlight><highlight class="normal">)){</highlight></codeline>
<codeline lineno="603"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QString<sp/>strFile1<sp/>=<sp/>strFile2.mid(7,<sp/>strFile2.length()<sp/>-<sp/>2);</highlight></codeline>
<codeline lineno="604"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;addItem(strFile1);</highlight></codeline>
<codeline lineno="605"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="606"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(strFile2.endsWith(</highlight><highlight class="stringliteral">&quot;.wallch&quot;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QString<sp/>file1<sp/>=<sp/>strFile2.mid(7,strFile2.length()-2);</highlight></codeline>
<codeline lineno="609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*path<sp/>=<sp/>file1.toUtf8().data();</highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>FILE<sp/>*file<sp/>=<sp/>fopen<sp/>(<sp/>path,<sp/></highlight><highlight class="stringliteral">&quot;r&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>file<sp/>!=<sp/>NULL<sp/>)</highlight></codeline>
<codeline lineno="612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ifstream<sp/>file(<sp/>path<sp/>)<sp/>;</highlight></codeline>
<codeline lineno="614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>line<sp/>;</highlight></codeline>
<codeline lineno="615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(<sp/>std::getline(<sp/>file,<sp/>line<sp/>)<sp/>)</highlight></codeline>
<codeline lineno="616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="617"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QString<sp/>qstr<sp/>=<sp/>QString::fromUtf8(line.c_str());</highlight></codeline>
<codeline lineno="618"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QListWidgetItem<sp/>*item<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QListWidgetItem;</highlight></codeline>
<codeline lineno="619"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>item-&gt;setText(qstr);</highlight></codeline>
<codeline lineno="620"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>item-&gt;setStatusTip(tr(</highlight><highlight class="stringliteral">&quot;Double-click<sp/>to<sp/>set<sp/>an<sp/>item<sp/>from<sp/>the<sp/>list<sp/>as<sp/>Background&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="621"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;addItem(item);</highlight></codeline>
<codeline lineno="622"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="623"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="624"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fclose<sp/>(<sp/>file<sp/>);</highlight></codeline>
<codeline lineno="625"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="626"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="627"><highlight class="normal"></highlight></codeline>
<codeline lineno="628"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">-&gt;acceptProposedAction();</highlight></codeline>
<codeline lineno="629"><highlight class="normal">}</highlight></codeline>
<codeline lineno="630"><highlight class="normal"></highlight></codeline>
<codeline lineno="631"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::dbus_action(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>QString<sp/>&amp;msg)<sp/></highlight><highlight class="comment">//QDBus<sp/>signal<sp/>handling</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="632"><highlight class="normal">{</highlight></codeline>
<codeline lineno="633"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(msg==</highlight><highlight class="stringliteral">&quot;FOCUS&quot;</highlight><highlight class="normal">)<sp/>{<sp/></highlight><highlight class="comment">//another<sp/>application<sp/>instance<sp/>has<sp/>come<sp/>without<sp/>any<sp/>arguments,<sp/>so<sp/>focus<sp/>to<sp/>the<sp/>already<sp/>running<sp/>process!</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;showNormal();</highlight></codeline>
<codeline lineno="635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;setFocusPolicy(Qt::StrongFocus);</highlight></codeline>
<codeline lineno="636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;setFocus();</highlight></codeline>
<codeline lineno="637"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;</highlight><highlight class="keyword">raise</highlight><highlight class="normal">();</highlight></codeline>
<codeline lineno="638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;setVisible(1);</highlight></codeline>
<codeline lineno="639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;activateWindow();</highlight></codeline>
<codeline lineno="640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="mainwindow_8cpp_1a2f73f86b6ed098ec989ba1767b5e8c2b" kindref="member">minimize_to_tray</ref>){</highlight></codeline>
<codeline lineno="641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(trayIcon-&gt;isVisible())</highlight></codeline>
<codeline lineno="642"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trayIcon-&gt;hide();</highlight></codeline>
<codeline lineno="643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="644"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(msg==</highlight><highlight class="stringliteral">&quot;NEW_ALBUM&quot;</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="645"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>add_new_album();</highlight></codeline>
<codeline lineno="646"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(msg==</highlight><highlight class="stringliteral">&quot;--start&quot;</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>on_startButton_clicked();</highlight></codeline>
<codeline lineno="648"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(msg==</highlight><highlight class="stringliteral">&quot;--pause&quot;</highlight><highlight class="normal">){</highlight></codeline>
<codeline lineno="649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>on_startButton_clicked();</highlight></codeline>
<codeline lineno="650"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(msg==</highlight><highlight class="stringliteral">&quot;--stop&quot;</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>on_stopButton_clicked();</highlight></codeline>
<codeline lineno="652"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(msg==</highlight><highlight class="stringliteral">&quot;--next&quot;</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>on_nextButton_clicked();</highlight></codeline>
<codeline lineno="654"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(msg==</highlight><highlight class="stringliteral">&quot;--previous&quot;</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="655"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>on_previousButton_clicked();</highlight></codeline>
<codeline lineno="656"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(msg==</highlight><highlight class="stringliteral">&quot;--earth&quot;</highlight><highlight class="normal"><sp/>||<sp/>msg==</highlight><highlight class="stringliteral">&quot;--earth_w8&quot;</highlight><highlight class="normal"><sp/>||<sp/>msg==</highlight><highlight class="stringliteral">&quot;--earth_unity&quot;</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!<ref refid="mainwindow_8cpp_1afe228fb35e2737cb1becbbe9b4308614" kindref="member">_live_earth_running_</ref>)</highlight></codeline>
<codeline lineno="658"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>livearth();</highlight></codeline>
<codeline lineno="659"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="660"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cerr<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;Live<sp/>earth<sp/>is<sp/>already<sp/>running!<sp/>Program<sp/>will<sp/>now<sp/>exit!\n&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="661"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>exit(2);</highlight></codeline>
<codeline lineno="662"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="663"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(msg==</highlight><highlight class="stringliteral">&quot;--constant&quot;</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="664"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>on_startButton_clicked();</highlight></codeline>
<codeline lineno="665"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(msg==</highlight><highlight class="stringliteral">&quot;--once&quot;</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="666"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>srand(time(0));</highlight></codeline>
<codeline lineno="667"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>random_pic=rand()%ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;count();</highlight></codeline>
<codeline lineno="668"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MainWindow::changeBackground(ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;item(random_pic)-&gt;text());</highlight></codeline>
<codeline lineno="669"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="670"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cerr<sp/>&lt;&lt;<sp/>QString(</highlight><highlight class="stringliteral">&quot;Program<sp/>received<sp/>the<sp/>unknown<sp/>dbus<sp/>message:<sp/>&quot;</highlight><highlight class="normal"><sp/>+<sp/>msg<sp/>+</highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal">).toLocal8Bit().data();</highlight></codeline>
<codeline lineno="671"><highlight class="normal">}</highlight></codeline>
<codeline lineno="672"><highlight class="normal"></highlight></codeline>
<codeline lineno="674"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::on_startButton_clicked()<sp/>{</highlight></codeline>
<codeline lineno="675"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ui-&gt;<ref refid="classUi__MainWindow_1a58a84cd3057ab5459819f986b08942b1" kindref="member">startButton</ref>-&gt;isEnabled()<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;<sp/></highlight><highlight class="comment">//<sp/>handles<sp/>if<sp/>called<sp/>from<sp/>shortcut<sp/>hotkey</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="676"><highlight class="normal"></highlight></codeline>
<codeline lineno="677"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(this-&gt;running<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="678"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>change<sp/>the<sp/>text<sp/>and<sp/>icons<sp/>on<sp/>buttons</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a58a84cd3057ab5459819f986b08942b1" kindref="member">startButton</ref>-&gt;setText(tr(</highlight><highlight class="stringliteral">&quot;Pau&amp;se&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>not<sp/>sure<sp/>why<sp/>there<sp/>is<sp/>the<sp/>big<sp/>space<sp/>here.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="681"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae338c30b4948a2301c9b166b4f384671" kindref="member">action_Start</ref>-&gt;setText(tr(</highlight><highlight class="stringliteral">&quot;Pau&amp;se<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Shift+Ctrl+S&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="682"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Start_action-&gt;setText(tr(</highlight><highlight class="stringliteral">&quot;Pau&amp;se&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="683"><highlight class="normal"></highlight></codeline>
<codeline lineno="684"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Start_action-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-playback-pause&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="685"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a58a84cd3057ab5459819f986b08942b1" kindref="member">startButton</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-playback-pause&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="686"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae338c30b4948a2301c9b166b4f384671" kindref="member">action_Start</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-playback-pause&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="687"><highlight class="normal"></highlight></codeline>
<codeline lineno="688"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;setDragDropMode(QAbstractItemView::DropOnly);</highlight></codeline>
<codeline lineno="689"><highlight class="normal"></highlight></codeline>
<codeline lineno="690"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>start<sp/>the<sp/>timer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="691"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>TODO:<sp/>Consider<sp/>using<sp/>second<sp/>level<sp/>updates</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="692"><highlight class="normal"></highlight></codeline>
<codeline lineno="693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;timerMinutes<sp/>=<sp/>this-&gt;delayMinutes;</highlight></codeline>
<codeline lineno="694"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;update_time-&gt;start(1000*60);</highlight></codeline>
<codeline lineno="695"><highlight class="normal"></highlight></codeline>
<codeline lineno="696"><highlight class="normal"></highlight></codeline>
<codeline lineno="697"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>disable<sp/>buttons,<sp/>hopefully<sp/>aim<sp/>to<sp/>be<sp/>able<sp/>to<sp/>remove<sp/>this.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="698"><highlight class="normal"></highlight></codeline>
<codeline lineno="699"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;running<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="700"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="701"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a58a84cd3057ab5459819f986b08942b1" kindref="member">startButton</ref>-&gt;setText(tr(</highlight><highlight class="stringliteral">&quot;&amp;Start&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="702"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae338c30b4948a2301c9b166b4f384671" kindref="member">action_Start</ref>-&gt;setText((</highlight><highlight class="stringliteral">&quot;&amp;Start<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Shift+Ctrl+S&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="703"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Start_action-&gt;setText(tr(</highlight><highlight class="stringliteral">&quot;&amp;Start&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="704"><highlight class="normal"></highlight></codeline>
<codeline lineno="705"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a58a84cd3057ab5459819f986b08942b1" kindref="member">startButton</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-playback-start&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="706"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae338c30b4948a2301c9b166b4f384671" kindref="member">action_Start</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-playback-start&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="707"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Start_action-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-playback-start&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="708"><highlight class="normal"></highlight></codeline>
<codeline lineno="709"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>stop<sp/>the<sp/>timer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="710"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;update_time-&gt;stop();</highlight></codeline>
<codeline lineno="711"><highlight class="normal"></highlight></codeline>
<codeline lineno="712"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ad200a2549a1067eff25bb476691c6555" kindref="member">time_for_next</ref>-&gt;setFormat(ui-&gt;<ref refid="classUi__MainWindow_1ad200a2549a1067eff25bb476691c6555" kindref="member">time_for_next</ref>-&gt;format()+</highlight><highlight class="stringliteral">&quot;<sp/>-<sp/>Paused.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="713"><highlight class="normal"></highlight></codeline>
<codeline lineno="714"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;setDragDropMode(QAbstractItemView::NoDragDrop<sp/>);</highlight></codeline>
<codeline lineno="715"><highlight class="normal"></highlight></codeline>
<codeline lineno="716"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;running<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="717"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="718"><highlight class="normal">}</highlight></codeline>
<codeline lineno="719"><highlight class="normal"></highlight></codeline>
<codeline lineno="720"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::randomImage()</highlight></codeline>
<codeline lineno="721"><highlight class="normal">{</highlight></codeline>
<codeline lineno="722"><highlight class="normal"><sp/><sp/><sp/><sp/>QString<sp/>qimage;</highlight></codeline>
<codeline lineno="723"><highlight class="normal"></highlight></codeline>
<codeline lineno="724"><highlight class="normal"><sp/><sp/><sp/><sp/>srand(time(0));</highlight></codeline>
<codeline lineno="725"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>r<sp/>=<sp/>(rand()<sp/>%<sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;count());</highlight></codeline>
<codeline lineno="726"><highlight class="normal"></highlight></codeline>
<codeline lineno="727"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!QImage(ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;item(r)-&gt;text()).isNull())<sp/>{</highlight></codeline>
<codeline lineno="728"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>qimage=ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;item(r)-&gt;text();</highlight></codeline>
<codeline lineno="729"><highlight class="normal"></highlight></codeline>
<codeline lineno="730"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MainWindow::changeBackground(qimage);</highlight></codeline>
<codeline lineno="731"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="732"><highlight class="normal">}</highlight></codeline>
<codeline lineno="733"><highlight class="normal"></highlight></codeline>
<codeline lineno="734"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::on_timerSlider_valueChanged(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>value)</highlight></codeline>
<codeline lineno="735"><highlight class="normal">{</highlight></codeline>
<codeline lineno="736"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(value<sp/>==<sp/>0)<sp/>{<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>setting<sp/><sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="737"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>delayMinutes<sp/>=<sp/>1;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>1<sp/>minute</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="738"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((1<sp/>&lt;=<sp/>value)<sp/>&amp;&amp;<sp/>(value<sp/>&lt;=<sp/>3))<sp/><sp/>{<sp/></highlight><highlight class="comment">//<sp/>settings<sp/>1-3</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="739"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>delayMinutes<sp/>=<sp/>(value<sp/>-<sp/>0)<sp/>*<sp/>5;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>multiples<sp/>of<sp/><sp/>5<sp/>minutes<sp/>(5,<sp/>10<sp/>15<sp/>minutes)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="740"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((4<sp/>&lt;=<sp/>value)<sp/>&amp;&amp;<sp/>(value<sp/>&lt;=<sp/>5))<sp/><sp/>{<sp/></highlight><highlight class="comment">//<sp/>settings<sp/>4-5</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="741"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>delayMinutes<sp/>=<sp/>(value<sp/>-<sp/>3)<sp/>*<sp/>30;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>multiples<sp/>of<sp/>30<sp/>minutes<sp/>(30,<sp/>60<sp/>minutes)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="742"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((6<sp/>&lt;=<sp/>value)<sp/>&amp;&amp;<sp/>(value<sp/>&lt;=<sp/>8))<sp/><sp/>{<sp/></highlight><highlight class="comment">//<sp/>settings<sp/>6-8</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="743"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>delayMinutes<sp/>=<sp/>(value<sp/>-<sp/>5)<sp/>*<sp/>60<sp/>*<sp/>2;<sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>multiples<sp/>of<sp/><sp/>2<sp/>hours<sp/><sp/><sp/>(2,<sp/>4,<sp/>6<sp/>hours)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="744"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(9<sp/>&lt;=<sp/>value)<sp/>{<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>settings<sp/>9-10</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="745"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>delayMinutes<sp/>=<sp/>(value<sp/>-<sp/>8)<sp/>*<sp/>60<sp/>*<sp/>12;<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>multiples<sp/>of<sp/>12<sp/>hours<sp/><sp/><sp/>(12,<sp/>24<sp/>hours)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="746"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>shouldn&apos;t<sp/>be<sp/>able<sp/>to<sp/>get<sp/>here</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="747"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>qDebug()<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;invalid<sp/>slider<sp/>value<sp/>sent,<sp/>somethings<sp/>messed<sp/>up&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="748"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1aed2eea321894fe7a8f3e23b78fc42793" kindref="member">timerSlider</ref>-&gt;setValue(5);</highlight></codeline>
<codeline lineno="749"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="750"><highlight class="normal"></highlight></codeline>
<codeline lineno="751"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>if<sp/>the<sp/>timer<sp/>is<sp/>dragged<sp/>under<sp/>the<sp/>current<sp/>delay,<sp/>set<sp/>the<sp/>delay<sp/>to<sp/>equal<sp/>the<sp/>current<sp/>value</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="752"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(this-&gt;timerMinutes<sp/>&lt;<sp/>this-&gt;delayMinutes)</highlight></codeline>
<codeline lineno="753"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;timerMinutes<sp/>=<sp/>this-&gt;delayMinutes;</highlight></codeline>
<codeline lineno="754"><highlight class="normal"></highlight></codeline>
<codeline lineno="755"><highlight class="normal"><sp/><sp/><sp/><sp/>QString<sp/>timerSliderText;</highlight></codeline>
<codeline lineno="756"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(delayMinutes<sp/>==<sp/>1)</highlight></codeline>
<codeline lineno="757"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>timerSliderText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;1<sp/>&quot;</highlight><highlight class="normal"><sp/>+<sp/>tr(</highlight><highlight class="stringliteral">&quot;minute&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="758"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(delayMinutes<sp/>&lt;<sp/>61)</highlight></codeline>
<codeline lineno="759"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>timerSliderText<sp/>=<sp/><ref refid="mainwindow_8cpp_1a7106e2abc437ad981830d14176d15f09" kindref="member">QString::number</ref>(delayMinutes)<sp/>+<sp/></highlight><highlight class="stringliteral">&quot;<sp/>&quot;</highlight><highlight class="normal"><sp/>+<sp/>tr(</highlight><highlight class="stringliteral">&quot;minutes&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="760"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="761"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>timerSliderText<sp/>=<sp/><ref refid="mainwindow_8cpp_1a7106e2abc437ad981830d14176d15f09" kindref="member">QString::number</ref>(delayMinutes<sp/>/60)<sp/><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;<sp/>&quot;</highlight><highlight class="normal"><sp/>+<sp/>tr(</highlight><highlight class="stringliteral">&quot;<sp/>hours&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="762"><highlight class="normal"></highlight></codeline>
<codeline lineno="763"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a9dc4dba26b83e0c94aa566e1c564420b" kindref="member">label_10</ref>-&gt;setText(timerSliderText);</highlight></codeline>
<codeline lineno="764"><highlight class="normal"></highlight></codeline>
<codeline lineno="765"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ad200a2549a1067eff25bb476691c6555" kindref="member">time_for_next</ref>-&gt;setMaximum(delayMinutes);</highlight></codeline>
<codeline lineno="766"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ad200a2549a1067eff25bb476691c6555" kindref="member">time_for_next</ref>-&gt;setValue(timerMinutes);</highlight></codeline>
<codeline lineno="767"><highlight class="normal">}</highlight></codeline>
<codeline lineno="768"><highlight class="normal"></highlight></codeline>
<codeline lineno="769"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::time_updater()<sp/>{</highlight></codeline>
<codeline lineno="770"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(this-&gt;running<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="771"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;<sp/></highlight><highlight class="comment">//<sp/>not<sp/>sure<sp/>if<sp/>we<sp/>should<sp/>be<sp/>able<sp/>to<sp/>get<sp/>here<sp/>yet.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="772"><highlight class="normal"></highlight></codeline>
<codeline lineno="773"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(this-&gt;timerMinutes<sp/>!=<sp/>0)<sp/>{<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>still<sp/>time<sp/>left<sp/>on<sp/>the<sp/>clock</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="774"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;timerMinutes--;</highlight></codeline>
<codeline lineno="775"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>no<sp/>time<sp/>left<sp/>on<sp/>the<sp/>clock</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="776"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MainWindow::randomImage();</highlight></codeline>
<codeline lineno="777"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;timerMinutes<sp/>=<sp/>this-&gt;delayMinutes;</highlight></codeline>
<codeline lineno="778"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="779"><highlight class="normal"></highlight></codeline>
<codeline lineno="780"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ad200a2549a1067eff25bb476691c6555" kindref="member">time_for_next</ref>-&gt;setValue(timerMinutes);</highlight></codeline>
<codeline lineno="781"><highlight class="normal"></highlight></codeline>
<codeline lineno="782"><highlight class="normal"><sp/><sp/><sp/><sp/>qDebug()<sp/>&lt;&lt;<sp/>timerMinutes<sp/>&lt;&lt;<sp/>delayMinutes;</highlight></codeline>
<codeline lineno="783"><highlight class="normal">}</highlight></codeline>
<codeline lineno="784"><highlight class="normal"></highlight></codeline>
<codeline lineno="785"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::on_stopButton_clicked()</highlight></codeline>
<codeline lineno="786"><highlight class="normal">{</highlight></codeline>
<codeline lineno="787"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;running<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="788"><highlight class="normal"></highlight></codeline>
<codeline lineno="789"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a58a84cd3057ab5459819f986b08942b1" kindref="member">startButton</ref>-&gt;setText(tr(</highlight><highlight class="stringliteral">&quot;&amp;Start&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="790"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae338c30b4948a2301c9b166b4f384671" kindref="member">action_Start</ref>-&gt;setText(tr(</highlight><highlight class="stringliteral">&quot;&amp;Start<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Shift+Ctrl+S&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="791"><highlight class="normal"><sp/><sp/><sp/><sp/>Start_action-&gt;setText(tr(</highlight><highlight class="stringliteral">&quot;&amp;Start&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="792"><highlight class="normal"></highlight></codeline>
<codeline lineno="793"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1a58a84cd3057ab5459819f986b08942b1" kindref="member">startButton</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-playback-start&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="794"><highlight class="normal"><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae338c30b4948a2301c9b166b4f384671" kindref="member">action_Start</ref>-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-playback-start&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="795"><highlight class="normal"><sp/><sp/><sp/><sp/>Start_action-&gt;setIcon(QIcon::fromTheme(</highlight><highlight class="stringliteral">&quot;media-playback-start&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="796"><highlight class="normal"></highlight></codeline>
<codeline lineno="797"><highlight class="normal"><sp/><sp/><sp/><sp/>update_time-&gt;stop();</highlight></codeline>
<codeline lineno="798"><highlight class="normal">}</highlight></codeline>
<codeline lineno="799"><highlight class="normal"></highlight></codeline>
<codeline lineno="800"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::on_nextButton_clicked()</highlight></codeline>
<codeline lineno="801"><highlight class="normal">{</highlight></codeline>
<codeline lineno="802"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;count()<sp/>!=<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="803"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>row<sp/>=<sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;currentRow()<sp/>+<sp/>1;</highlight></codeline>
<codeline lineno="804"><highlight class="normal"></highlight></codeline>
<codeline lineno="805"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(row<sp/>&gt;=<sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;count())</highlight></codeline>
<codeline lineno="806"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>row<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="807"><highlight class="normal"></highlight></codeline>
<codeline lineno="808"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;setCurrentRow(row);</highlight></codeline>
<codeline lineno="809"><highlight class="normal"></highlight></codeline>
<codeline lineno="810"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MainWindow::changeBackground(ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;currentItem()-&gt;text());</highlight></codeline>
<codeline lineno="811"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="812"><highlight class="normal">}</highlight></codeline>
<codeline lineno="813"><highlight class="normal"></highlight></codeline>
<codeline lineno="814"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::on_previousButton_clicked()</highlight></codeline>
<codeline lineno="815"><highlight class="normal">{</highlight></codeline>
<codeline lineno="816"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;count()<sp/>!=<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="817"><highlight class="normal"></highlight></codeline>
<codeline lineno="818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>row<sp/>=<sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;currentRow()<sp/>-<sp/>1;</highlight></codeline>
<codeline lineno="819"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(row<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="820"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>row<sp/>=<sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;count()<sp/>-<sp/>1;</highlight></codeline>
<codeline lineno="821"><highlight class="normal"></highlight></codeline>
<codeline lineno="822"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;setCurrentRow(row);</highlight></codeline>
<codeline lineno="823"><highlight class="normal"></highlight></codeline>
<codeline lineno="824"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MainWindow::changeBackground(ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;currentItem()-&gt;text());</highlight></codeline>
<codeline lineno="825"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="826"><highlight class="normal">}</highlight></codeline>
<codeline lineno="827"><highlight class="normal"></highlight></codeline>
<codeline lineno="828"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::desktopNotify(QString<sp/>qimage)</highlight></codeline>
<codeline lineno="829"><highlight class="normal">{</highlight></codeline>
<codeline lineno="830"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!QFile(qimage).exists())</highlight></codeline>
<codeline lineno="831"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="832"><highlight class="normal"></highlight></codeline>
<codeline lineno="833"><highlight class="normal"><sp/><sp/><sp/><sp/>QString<sp/>body=tr(</highlight><highlight class="stringliteral">&quot;Your<sp/>current<sp/>wallpaper<sp/>has<sp/>changed!&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="834"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!notify_init<sp/>(</highlight><highlight class="stringliteral">&quot;update-notifications&quot;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="835"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="836"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="mainwindow_8cpp_1a2be4ab79f1259f10af556108bc88f5cb" kindref="member">notification_first_time</ref>)<sp/>{</highlight></codeline>
<codeline lineno="837"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mainwindow_8cpp_1a2be4ab79f1259f10af556108bc88f5cb" kindref="member">notification_first_time</ref>=</highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="838"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>try<sp/>the<sp/>icon-summary-body<sp/>case<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="839"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mainwindow_8cpp_1a2effe0844099f876464abae594ff1fb2" kindref="member">notification</ref><sp/>=<sp/>notify_notification_new<sp/>(<sp/></highlight><highlight class="stringliteral">&quot;Wallch&quot;</highlight><highlight class="normal">,<sp/>body.toLocal8Bit().data(),<sp/>qimage.toLocal8Bit().data(),<sp/>NULL);</highlight></codeline>
<codeline lineno="840"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mainwindow_8cpp_1abc39a4bba3587c275762137dee2c3fc1" kindref="member">error</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="841"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mainwindow_8cpp_1a6e33a04ebc80fee4946b364681fecffd" kindref="member">success</ref><sp/>=<sp/>notify_notification_show<sp/>(<ref refid="mainwindow_8cpp_1a2effe0844099f876464abae594ff1fb2" kindref="member">notification</ref>,<sp/>&amp;error);</highlight></codeline>
<codeline lineno="842"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="mainwindow_8cpp_1a6e33a04ebc80fee4946b364681fecffd" kindref="member">success</ref>)<sp/>{</highlight></codeline>
<codeline lineno="843"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>g_print<sp/>(</highlight><highlight class="stringliteral">&quot;That<sp/>did<sp/>not<sp/>work<sp/>...<sp/>\&quot;%s\&quot;.\n&quot;</highlight><highlight class="normal">,<sp/>error-&gt;message);</highlight></codeline>
<codeline lineno="844"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>g_error_free<sp/>(error);</highlight></codeline>
<codeline lineno="845"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="846"><highlight class="normal"></highlight></codeline>
<codeline lineno="847"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>g_signal_connect<sp/>(G_OBJECT<sp/>(<ref refid="mainwindow_8cpp_1a2effe0844099f876464abae594ff1fb2" kindref="member">notification</ref>),<sp/></highlight><highlight class="stringliteral">&quot;closed&quot;</highlight><highlight class="normal">,<sp/>G_CALLBACK<sp/>(&amp;MainWindow::handle),<sp/>NULL);</highlight></codeline>
<codeline lineno="848"><highlight class="normal"></highlight></codeline>
<codeline lineno="849"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="850"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="851"><highlight class="normal"></highlight></codeline>
<codeline lineno="852"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>update<sp/>the<sp/>current<sp/>notification<sp/>with<sp/>new<sp/>content<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="853"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mainwindow_8cpp_1a6e33a04ebc80fee4946b364681fecffd" kindref="member">success</ref><sp/>=<sp/>notify_notification_update<sp/>(<ref refid="mainwindow_8cpp_1a2effe0844099f876464abae594ff1fb2" kindref="member">notification</ref>,<sp/></highlight><highlight class="stringliteral">&quot;Wallch&quot;</highlight><highlight class="normal">,body.toLocal8Bit().data(),qimage.toLocal8Bit().data());</highlight></codeline>
<codeline lineno="854"><highlight class="normal"><sp/><sp/><sp/><sp/>error<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="855"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mainwindow_8cpp_1a6e33a04ebc80fee4946b364681fecffd" kindref="member">success</ref><sp/>=<sp/>notify_notification_show<sp/>(<ref refid="mainwindow_8cpp_1a2effe0844099f876464abae594ff1fb2" kindref="member">notification</ref>,<sp/>&amp;error);</highlight></codeline>
<codeline lineno="856"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="mainwindow_8cpp_1a6e33a04ebc80fee4946b364681fecffd" kindref="member">success</ref>)<sp/>{</highlight></codeline>
<codeline lineno="857"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>g_print<sp/>(</highlight><highlight class="stringliteral">&quot;That<sp/>did<sp/>not<sp/>work<sp/>...<sp/>\&quot;%s\&quot;.\n&quot;</highlight><highlight class="normal">,<sp/>error-&gt;message);</highlight></codeline>
<codeline lineno="858"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>g_error_free<sp/>(error);</highlight></codeline>
<codeline lineno="859"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="860"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="861"><highlight class="normal"></highlight></codeline>
<codeline lineno="862"><highlight class="normal"><sp/><sp/><sp/><sp/>g_signal_connect<sp/>(G_OBJECT<sp/>(<ref refid="mainwindow_8cpp_1a2effe0844099f876464abae594ff1fb2" kindref="member">notification</ref>),<sp/></highlight><highlight class="stringliteral">&quot;closed&quot;</highlight><highlight class="normal">,<sp/>G_CALLBACK<sp/>(&amp;MainWindow::handle),<sp/>NULL);</highlight></codeline>
<codeline lineno="863"><highlight class="normal">}</highlight></codeline>
<codeline lineno="864"><highlight class="normal"></highlight></codeline>
<codeline lineno="865"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::handle()<sp/>{<sp/>}</highlight></codeline>
<codeline lineno="866"><highlight class="normal"></highlight></codeline>
<codeline lineno="867"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>MainWindow::changeBackground(QString<sp/>picture)<sp/>{</highlight></codeline>
<codeline lineno="868"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Make<sp/>a<sp/>GConf<sp/>Connection</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="869"><highlight class="normal"><sp/><sp/><sp/><sp/>GConfClient*<sp/>client<sp/>=<sp/>gconf_client_get_default();</highlight></codeline>
<codeline lineno="870"><highlight class="normal"></highlight></codeline>
<codeline lineno="871"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Change<sp/>the<sp/>Background</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="872"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!gconf_client_set_string(client,<sp/></highlight><highlight class="stringliteral">&quot;/desktop/gnome/background/picture_filename&quot;</highlight><highlight class="normal">,<sp/>picture.toLatin1(),<sp/>NULL))<sp/>{</highlight></codeline>
<codeline lineno="873"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>qDebug()<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;Unable<sp/>to<sp/>change<sp/>background,<sp/>check<sp/>.gconf<sp/>permissions&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="874"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="875"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="876"><highlight class="normal"></highlight></codeline>
<codeline lineno="877"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Show<sp/>notifications,<sp/>play<sp/>sounds,<sp/>and<sp/>update<sp/>history,<sp/>according<sp/>to<sp/>preferences.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="878"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(this-&gt;desktopNotification)<sp/><sp/>QtConcurrent::run(</highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>&amp;MainWindow::desktopNotify,ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;currentItem()-&gt;text());</highlight></codeline>
<codeline lineno="879"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(this-&gt;soundNotification)<sp/>QtConcurrent::run(</highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>&amp;MainWindow::soundNotify);</highlight></codeline>
<codeline lineno="880"><highlight class="normal"></highlight></codeline>
<codeline lineno="881"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="882"><highlight class="normal">}</highlight></codeline>
<codeline lineno="883"><highlight class="normal"></highlight></codeline>
<codeline lineno="884"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::soundNotify()<sp/>{</highlight></codeline>
<codeline lineno="885"><highlight class="normal"><sp/><sp/><sp/><sp/>QString<sp/>soundFile;</highlight></codeline>
<codeline lineno="886"><highlight class="normal"></highlight></codeline>
<codeline lineno="887"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>TODO:<sp/>Add<sp/>logic<sp/>for<sp/>playing<sp/>custom<sp/>sound</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="888"><highlight class="normal"><sp/><sp/><sp/><sp/>soundFile<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;/usr/share/wallch/files/notification.ogg&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="889"><highlight class="normal"></highlight></codeline>
<codeline lineno="890"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Load<sp/>the<sp/>sound</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="891"><highlight class="normal"><sp/><sp/><sp/><sp/>sf::Music<sp/>sound;</highlight></codeline>
<codeline lineno="892"><highlight class="normal"></highlight></codeline>
<codeline lineno="893"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!sound.OpenFromFile(soundFile.toStdString()))<sp/>{</highlight></codeline>
<codeline lineno="894"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>qDebug()<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;Sound<sp/>didn&apos;t<sp/>open<sp/>right.&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="895"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="896"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="897"><highlight class="normal"></highlight></codeline>
<codeline lineno="898"><highlight class="normal"><sp/><sp/><sp/><sp/>sound.Play();</highlight></codeline>
<codeline lineno="899"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Loop<sp/>while<sp/>the<sp/>music<sp/>is<sp/>playing</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="900"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(sound.GetStatus()<sp/>==<sp/>sf::Music::Playing)<sp/>{</highlight></codeline>
<codeline lineno="901"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Leave<sp/>some<sp/>CPU<sp/>time<sp/>for<sp/>other<sp/>threads</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="902"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sf::Sleep(0.1f);</highlight></codeline>
<codeline lineno="903"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="904"><highlight class="normal">}</highlight></codeline>
<codeline lineno="905"><highlight class="normal"></highlight></codeline>
<codeline lineno="906" refid="classMainWindow_1a95d7c8c04e09437afc222121d383a722" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classMainWindow_1a95d7c8c04e09437afc222121d383a722" kindref="member">MainWindow::menushowabout</ref>()<sp/>{</highlight></codeline>
<codeline lineno="907"><highlight class="normal"><sp/><sp/><sp/><sp/>About<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classabout" kindref="compound">about</ref>(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="908"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>About-&gt;isVisible()<sp/>)</highlight></codeline>
<codeline lineno="909"><highlight class="normal"><sp/><sp/><sp/><sp/>{About-&gt;raise();</highlight></codeline>
<codeline lineno="910"><highlight class="normal"><sp/><sp/><sp/><sp/>About-&gt;activateWindow();}</highlight></codeline>
<codeline lineno="911"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="912"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>About-&gt;show();</highlight></codeline>
<codeline lineno="913"><highlight class="normal">}</highlight></codeline>
<codeline lineno="914"><highlight class="normal"></highlight></codeline>
<codeline lineno="915" refid="classMainWindow_1a7aec36163c9dfeda7da43b3e0854d673" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classMainWindow_1a7aec36163c9dfeda7da43b3e0854d673" kindref="member">MainWindow::ShowPreferences</ref>()</highlight></codeline>
<codeline lineno="916"><highlight class="normal">{</highlight></codeline>
<codeline lineno="917"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="mainwindow_8cpp_1a96203077ee28957ab99fcabaf70abc0f" kindref="member">pref</ref>)</highlight></codeline>
<codeline lineno="918"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="919"><highlight class="normal"><sp/><sp/><sp/><sp/>preferences<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classPreferences" kindref="compound">Preferences</ref>(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="920"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mainwindow_8cpp_1a96203077ee28957ab99fcabaf70abc0f" kindref="member">pref</ref>=1;</highlight></codeline>
<codeline lineno="921"><highlight class="normal"><sp/><sp/><sp/><sp/>preferences-&gt;exec();<sp/></highlight><highlight class="comment">//executing<sp/>the<sp/>preferences<sp/>dialog.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="922"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mainwindow_8cpp_1a96203077ee28957ab99fcabaf70abc0f" kindref="member">pref</ref>=0;</highlight></codeline>
<codeline lineno="923"><highlight class="normal">}</highlight></codeline>
<codeline lineno="924"><highlight class="normal"></highlight></codeline>
<codeline lineno="925" refid="classMainWindow_1ae3130ae3dcc5f6261fb633f52ec062a7" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classMainWindow_1ae3130ae3dcc5f6261fb633f52ec062a7" kindref="member">MainWindow::ShowExtras</ref>()</highlight></codeline>
<codeline lineno="926"><highlight class="normal">{</highlight></codeline>
<codeline lineno="927"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="mainwindow_8cpp_1a98dda529b7c9c1d6bb6edf3644a1954f" kindref="member">extras_shown</ref>)</highlight></codeline>
<codeline lineno="928"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="929"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mainwindow_8cpp_1a98dda529b7c9c1d6bb6edf3644a1954f" kindref="member">extras_shown</ref>=</highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="930"><highlight class="normal"><sp/><sp/><sp/><sp/>extras<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classExtras" kindref="compound">Extras</ref>(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="931"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(extras,SIGNAL(start_live_earth()),</highlight><highlight class="keyword">this</highlight><highlight class="normal">,SLOT(livearth()));</highlight></codeline>
<codeline lineno="932"><highlight class="normal"><sp/><sp/><sp/><sp/>connect(extras,SIGNAL(stop_live_earth()),</highlight><highlight class="keyword">this</highlight><highlight class="normal">,SLOT(stop_livearth()));</highlight></codeline>
<codeline lineno="933"><highlight class="normal"><sp/><sp/><sp/><sp/>extras-&gt;exec();<sp/></highlight><highlight class="comment">//executing<sp/>the<sp/>preferences<sp/>dialog.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="934"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mainwindow_8cpp_1a98dda529b7c9c1d6bb6edf3644a1954f" kindref="member">extras_shown</ref>=</highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="935"><highlight class="normal">}</highlight></codeline>
<codeline lineno="936"><highlight class="normal"></highlight></codeline>
<codeline lineno="937" refid="classMainWindow_1a3b43993780b5d104db3472ce7e9180e6" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classMainWindow_1a3b43993780b5d104db3472ce7e9180e6" kindref="member">MainWindow::Openfolder</ref>(){</highlight></codeline>
<codeline lineno="938"><highlight class="normal"><sp/><sp/><sp/><sp/>QDesktopServices::openUrl(QUrl(</highlight><highlight class="stringliteral">&quot;file:///&quot;</highlight><highlight class="normal"><sp/>+<sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;currentItem()-&gt;text()));</highlight></codeline>
<codeline lineno="939"><highlight class="normal">}</highlight></codeline>
<codeline lineno="940"><highlight class="normal"></highlight></codeline>
<codeline lineno="941" refid="classMainWindow_1a4da9a80d3c5a312dde4fa246436d100f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classMainWindow_1a4da9a80d3c5a312dde4fa246436d100f" kindref="member">MainWindow::showProperties</ref>()</highlight></codeline>
<codeline lineno="942"><highlight class="normal">{</highlight></codeline>
<codeline lineno="943"><highlight class="normal"><sp/><sp/><sp/><sp/>QString<sp/>img_filename=ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;currentItem()-&gt;text();</highlight></codeline>
<codeline lineno="944"><highlight class="normal"><sp/><sp/><sp/><sp/>Properties<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classproperties" kindref="compound">properties</ref>(img_filename,</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="945"><highlight class="normal"><sp/><sp/><sp/><sp/>Properties-&gt;show();</highlight></codeline>
<codeline lineno="946"><highlight class="normal">}</highlight></codeline>
<codeline lineno="947"><highlight class="normal"></highlight></codeline>
<codeline lineno="948"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>MainWindow::add_new_album()</highlight></codeline>
<codeline lineno="949"><highlight class="normal">{</highlight></codeline>
<codeline lineno="950"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//no<sp/>comments....</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="951"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!ui-&gt;<ref refid="classUi__MainWindow_1a1761410af45480e8a833dae3c88e96e4" kindref="member">addButton</ref>-&gt;isEnabled())<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="952"><highlight class="normal"></highlight></codeline>
<codeline lineno="953"><highlight class="normal"><sp/><sp/><sp/><sp/>FILE<sp/>*file<sp/>=<sp/>fopen(QString(QDir::homePath()+</highlight><highlight class="stringliteral">&quot;/.config/Wallch/Checks/new_albums&quot;</highlight><highlight class="normal">).toLocal8Bit().data(),<sp/></highlight><highlight class="stringliteral">&quot;r&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="954"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>file<sp/>!=<sp/>NULL<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="955"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ifstream<sp/>file(QString(QDir::homePath()+</highlight><highlight class="stringliteral">&quot;/.config/Wallch/Checks/new_albums&quot;</highlight><highlight class="normal">).toLocal8Bit().data());</highlight></codeline>
<codeline lineno="956"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>line1;</highlight></codeline>
<codeline lineno="957"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(getline(file,<sp/>line1))<sp/>{</highlight></codeline>
<codeline lineno="958"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/>line<sp/>=<sp/>line1.c_str<sp/>();</highlight></codeline>
<codeline lineno="959"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>FILE<sp/>*file1<sp/>=<sp/>fopen<sp/>(line,<sp/></highlight><highlight class="stringliteral">&quot;r&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="960"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(file1<sp/>!=<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="961"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ifstream<sp/>file(line);</highlight></codeline>
<codeline lineno="962"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>line;</highlight></codeline>
<codeline lineno="963"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(std::getline(file,<sp/>line))<sp/>{</highlight></codeline>
<codeline lineno="964"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QString<sp/>qstr<sp/>=<sp/>QString::fromUtf8(line.c_str());</highlight></codeline>
<codeline lineno="965"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QListWidgetItem<sp/>*item<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QListWidgetItem;</highlight></codeline>
<codeline lineno="966"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>item-&gt;setText(qstr);</highlight></codeline>
<codeline lineno="967"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>item-&gt;setStatusTip(tr(</highlight><highlight class="stringliteral">&quot;Double-click<sp/>to<sp/>set<sp/>an<sp/>item<sp/>from<sp/>the<sp/>list<sp/>as<sp/>Background&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="968"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;addItem(item);</highlight></codeline>
<codeline lineno="969"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="970"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="971"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="972"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="973"><highlight class="normal"></highlight></codeline>
<codeline lineno="974"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;showNormal();</highlight></codeline>
<codeline lineno="975"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;setFocusPolicy(Qt::StrongFocus);</highlight></codeline>
<codeline lineno="976"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;setFocus();</highlight></codeline>
<codeline lineno="977"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;</highlight><highlight class="keyword">raise</highlight><highlight class="normal">();</highlight></codeline>
<codeline lineno="978"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;setVisible(1);</highlight></codeline>
<codeline lineno="979"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;activateWindow();</highlight></codeline>
<codeline lineno="980"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="mainwindow_8cpp_1a2f73f86b6ed098ec989ba1767b5e8c2b" kindref="member">minimize_to_tray</ref>)<sp/>{</highlight></codeline>
<codeline lineno="981"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(trayIcon-&gt;isVisible())</highlight></codeline>
<codeline lineno="982"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trayIcon-&gt;hide();</highlight></codeline>
<codeline lineno="983"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="984"><highlight class="normal">}</highlight></codeline>
<codeline lineno="985"><highlight class="normal"></highlight></codeline>
<codeline lineno="986" refid="classMainWindow_1ae50efe3540a13d96ec86c677ad56880c" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classMainWindow_1ae50efe3540a13d96ec86c677ad56880c" kindref="member">MainWindow::save_album</ref>()<sp/>{</highlight></codeline>
<codeline lineno="987"><highlight class="normal"><sp/><sp/><sp/><sp/>QString<sp/>format<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;wallch&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="988"><highlight class="normal"><sp/><sp/><sp/><sp/>QString<sp/>initialPath<sp/>=<sp/>QDir::currentPath()<sp/>+<sp/></highlight><highlight class="stringliteral">&quot;/album.&quot;</highlight><highlight class="normal"><sp/>+<sp/>format;</highlight></codeline>
<codeline lineno="989"><highlight class="normal"><sp/><sp/><sp/><sp/>QString<sp/>fileName;</highlight></codeline>
<codeline lineno="990"><highlight class="normal"><sp/><sp/><sp/><sp/>fileName<sp/>=<sp/>QFileDialog::getSaveFileName(</highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>tr(</highlight><highlight class="stringliteral">&quot;Save<sp/>As&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="991"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>initialPath,</highlight></codeline>
<codeline lineno="992"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tr(</highlight><highlight class="stringliteral">&quot;%1<sp/>Files<sp/>(*.%2);;All<sp/>Files<sp/>(*)&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="993"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.arg(format.toUpper())</highlight></codeline>
<codeline lineno="994"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.arg(format));</highlight></codeline>
<codeline lineno="995"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!fileName.isEmpty()){</highlight></codeline>
<codeline lineno="996"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QFile<sp/>file8(<sp/>fileName<sp/>);</highlight></codeline>
<codeline lineno="997"><highlight class="normal"></highlight></codeline>
<codeline lineno="998"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>file8.open(<sp/>QIODevice::WriteOnly<sp/>)<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="999"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>file<sp/>opened<sp/>and<sp/>is<sp/>overwriten<sp/>with<sp/>WriteOnly</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1000"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QTextStream<sp/>textStream(<sp/>&amp;file8<sp/>);</highlight></codeline>
<codeline lineno="1001"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i=0;<sp/>i<sp/>&lt;<sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;count();<sp/>++i<sp/>){</highlight></codeline>
<codeline lineno="1002"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>textStream<sp/>&lt;&lt;<sp/>ui-&gt;<ref refid="classUi__MainWindow_1ae647a15635ba8a0e5d5aec475db99d8f" kindref="member">listWidget</ref>-&gt;item(i)-&gt;text();</highlight></codeline>
<codeline lineno="1003"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>textStream<sp/>&lt;&lt;<sp/></highlight><highlight class="charliteral">&apos;\n&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1004"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1005"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file8.close();</highlight></codeline>
<codeline lineno="1006"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1007"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1008"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="/home/maxmahem/wallch-2.0/mainwindow.cpp"/>
  </compounddef>
</doxygen>
